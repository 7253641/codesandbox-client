!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);var r;!function(e){e.fromTextSpan=(e=>new i.Range(Math.max(0,e.start.line-1),Math.max(e.start.offset-1,0),Math.max(0,e.end.line-1),Math.max(0,e.end.offset-1))),e.toFileRangeRequestArgs=((e,t)=>({file:e,startLine:t.start.line+1,startOffset:t.start.character+1,endLine:t.end.line+1,endOffset:t.end.character+1})),e.toFormattingRequestArgs=((e,t)=>({file:e,line:t.start.line+1,offset:t.start.character+1,endLine:t.end.line+1,endOffset:t.end.character+1}))}(r=t.Range||(t.Range={})),function(e){e.fromLocation=(e=>new i.Position(e.line-1,e.offset-1)),e.toFileLocationRequestArgs=((e,t)=>({file:e,line:t.line+1,offset:t.character+1}))}(t.Position||(t.Position={})),function(e){e.fromTextSpan=((e,t)=>new i.Location(e,r.fromTextSpan(t)))}(t.Location||(t.Location={})),function(e){e.fromCodeEdit=(e=>new i.TextEdit(r.fromTextSpan(e),e.newText))}(t.TextEdit||(t.TextEdit={})),function(e){function t(e,t,n){for(const i of n)for(const n of i.textChanges)e.replace(t.toResource(i.fileName),r.fromTextSpan(n),n.newText);return e}e.fromFileCodeEdits=function(e,n){return t(new i.WorkspaceEdit,e,n)},e.withFileCodeEdits=t}(t.WorkspaceEdit||(t.WorkspaceEdit={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(35),r=n(3).loadMessageBundle();class s{constructor(e,t){this.versionString=e,this.version=t}static fromSimpleString(e){return new s(e,e)}static fromVersionString(e){let t=i.valid(e);if(!t)return new s(r("invalidVersion","invalid version"),"1.0.0");const n=e.indexOf("-");return n>=0&&(t=t.substr(0,n)),new s(e,t)}gte(e){return i.gte(this.version,e.version)}lt(e){return!this.gte(e)}}s.defaultVersion=s.fromSimpleString("1.0.0"),s.v203=s.fromSimpleString("2.0.3"),s.v206=s.fromSimpleString("2.0.6"),s.v208=s.fromSimpleString("2.0.8"),s.v213=s.fromSimpleString("2.1.3"),s.v220=s.fromSimpleString("2.2.0"),s.v222=s.fromSimpleString("2.2.2"),s.v230=s.fromSimpleString("2.3.0"),s.v234=s.fromSimpleString("2.3.4"),s.v240=s.fromSimpleString("2.4.0"),s.v250=s.fromSimpleString("2.5.0"),s.v260=s.fromSimpleString("2.6.0"),s.v270=s.fromSimpleString("2.7.0"),s.v280=s.fromSimpleString("2.8.0"),s.v290=s.fromSimpleString("2.9.0"),s.v291=s.fromSimpleString("2.9.1"),s.v292=s.fromSimpleString("2.9.2"),s.v300=s.fromSimpleString("3.0.0"),s.v310=s.fromSimpleString("3.1.0"),s.v314=s.fromSimpleString("3.1.4"),s.v320=s.fromSimpleString("3.2.0"),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,s,o,a,c=n(4),l=n(6),u=Object.prototype.toString;function d(e){return void 0!==e}function h(e){return"[object String]"===u.call(e)}function g(e){return JSON.parse(l.readFileSync(e,"utf8"))}function p(e,t){return a&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,function(e,n){var i=n[0],r=t[i],s=e;return"string"==typeof r?s=r:"number"!=typeof r&&"boolean"!=typeof r&&void 0!==r&&null!==r||(s=String(r)),s})}function f(e){return function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return function(e){return"[object Number]"===u.call(e)}(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):p(e[t],i):h(n)?(console.warn("Message "+n+" didn't get externalized correctly."),p(n,i)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function m(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return p(t,n)}function v(e,t){return s[e]=t,t}function y(e,t){var n,i=c.join(o.cacheRoot,e.id+"-"+e.hash+".json"),r=!1,s=!1;try{return n=JSON.parse(l.readFileSync(i,{encoding:"utf8",flag:"r"})),function(e){var t=new Date;l.utimes(e,t,t,function(){})}(i),n}catch(e){if("ENOENT"===e.code)s=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),l.unlink(i,function(e){e&&console.error("Deleting corrupted bundle "+i+" failed.")}),r=!0}}if(!(n=function(e,t){var n=o.translationsConfig[e.id];if(n){var i=g(n).contents,r=g(c.join(t,"nls.metadata.json")),s=Object.create(null);for(var a in r){var l=r[a],u=i[e.outDir+"/"+a];if(u){for(var d=[],p=0;p<l.keys.length;p++){var f=l.keys[p],m=u[h(f)?f:f.key];void 0===m&&(m=l.messages[p]),d.push(m)}s[a]=d}else s[a]=l.messages}return s}}(e,t))||r)return n;if(s)try{l.writeFileSync(i,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return n;throw e}return n}function w(e){try{return function(e){var t=g(c.join(e,"nls.metadata.json")),n=Object.create(null);for(var i in t){var r=t[i];n[i]=r.messages}return n}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function S(e,t){var n;if(!0===o.languagePackSupport&&void 0!==o.cacheRoot&&void 0!==o.languagePackId&&void 0!==o.translationsConfigFile&&void 0!==o.translationsConfig)try{n=y(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!n){if(o.languagePackSupport)return w(t);var i=function(e){for(var t=o.locale;t;){var n=c.join(e,"nls.bundle."+t+".json");if(l.existsSync(n))return n;var i=t.lastIndexOf("-");t=i>0?t.substring(0,i):void 0}if(void 0===t&&(n=c.join(e,"nls.bundle.json"),l.existsSync(n)))return n}(t);if(i)try{return g(i)}catch(e){console.log("Loading in the box message bundle failed.",e)}n=w(t)}return n}function b(e){if(!e)return m;var t=c.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),o.messageFormat===i.both||o.messageFormat===i.bundle){var n=function(e){for(var t,n=c.dirname(e);t=c.join(n,"nls.metadata.header.json"),!l.existsSync(t);){var i=c.dirname(n);if(i===n){t=void 0;break}n=i}return t}(e);if(n){var r=c.dirname(n),u=s[r];if(void 0===u)try{var h=JSON.parse(l.readFileSync(n,"utf8"));try{var p=S(h,r);u=v(r,p?{header:h,nlsBundle:p}:null)}catch(e){console.error("Failed to load nls bundle",e),u=v(r,null)}}catch(e){console.error("Failed to read header file",e),u=v(r,null)}if(u){var y=e.substr(r.length+1).replace(/\\/g,"/"),w=u.nlsBundle[y];return void 0===w?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):f(w)}}}if(o.messageFormat===i.both||o.messageFormat===i.file)try{var b=g(function(e){var t;if(o.cacheLanguageResolution&&t)t=t;else{if(a||!o.locale)t=".nls.json";else for(var n=o.locale;n;){var i=".nls."+n+".json";if(l.existsSync(e+i)){t=i;break}var r=n.lastIndexOf("-");r>0?n=n.substring(0,r):(t=".nls.json",n=null)}o.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(b)?f(b):d(b.messages)&&d(b.keys)?f(b.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(i=t.MessageFormat||(t.MessageFormat={})),function(e){e.is=function(e){var t=e;return t&&d(t.key)&&d(t.comment)}}(r||(r={})),function(){if(o={locale:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:i.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG);if(h(e.locale)&&(o.locale=e.locale.toLowerCase()),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(o.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(o.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(o.languagePackId=e._languagePackId),h(e._translationsConfigFile)){o.translationsConfigFile=e._translationsConfigFile;try{o.translationsConfig=g(o.translationsConfigFile)}catch(t){e._corruptedFile&&l.writeFile(e._corruptedFile,"corrupted","utf8",function(e){console.error(e)})}}}catch(e){}a="pseudo"===o.locale,void 0,s=Object.create(null)}(),t.loadMessageBundle=b,t.config=function(e){return e&&(h(e.locale)&&(o.locale=e.locale.toLowerCase(),void 0,s=Object.create(null)),void 0!==e.messageFormat&&(o.messageFormat=e.messageFormat)),a="pseudo"===o.locale,b}},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(7);class s{constructor(e){this._doRegister=e,this.registration=void 0}dispose(){this.registration&&(this.registration.dispose(),this.registration=void 0)}update(e){e?this.registration||(this.registration=this._doRegister()):this.registration&&(this.registration.dispose(),this.registration=void 0)}}t.ConditionalRegistration=s;t.VersionDependentRegistration=class extends r.Disposable{constructor(e,t,n){super(),this.client=e,this.minVersion=t,this._registration=new s(n),this.update(e.apiVersion),this.client.onTsServerStarted(()=>{this.update(this.client.apiVersion)},null,this._disposables)}dispose(){super.dispose(),this._registration.dispose()}update(e){this._registration.update(e.gte(this.minVersion))}};t.ConfigurationDependentRegistration=class extends r.Disposable{constructor(e,t,n){super(),this.language=e,this.configValue=t,this._registration=new s(n),this.update(),i.workspace.onDidChangeConfiguration(this.update,this,this._disposables)}dispose(){super.dispose(),this._registration.dispose()}update(){const e=i.workspace.getConfiguration(this.language,null);this._registration.update(!!e.get(this.configValue))}}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Disposable=class{constructor(){this._isDisposed=!1,this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,function(e){for(;e.length;){const t=e.pop();t&&t.dispose()}}(this._disposables))}_register(e){return this._isDisposed?e.dispose():this._disposables.push(e),e}get isDisposed(){return this._isDisposed}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.typescript="typescript",t.typescriptreact="typescriptreact",t.javascript="javascript",t.javascriptreact="javascriptreact",t.jsxTags="jsx-tags",t.isSupportedLanguageMode=function(e){return i.languages.match([t.typescript,t.typescriptreact,t.javascript,t.javascriptreact],e)>0},t.isTypeScriptDocument=function(e){return i.languages.match([t.typescript,t.typescriptreact],e)>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new(n(0).CancellationTokenSource);t.nulToken=i.token},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e,t,n){let i=void 0,r=void 0;if("function"==typeof n.value)i="value",r=n.value;else{if("function"!=typeof n.get)throw new Error("not supported");i="get",r=n.get}const s=`$memoize$${t}`;n[i]=function(...e){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,e)}),this[s]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{}i.alias="alias",i.callSignature="call",i.class="class",i.const="const",i.constructorImplementation="constructor",i.constructSignature="construct",i.directory="directory",i.enum="enum",i.externalModuleName="external module name",i.function="function",i.indexSignature="index",i.interface="interface",i.keyword="keyword",i.let="let",i.localFunction="local function",i.localVariable="local var",i.memberFunction="method",i.memberGetAccessor="getter",i.memberSetAccessor="setter",i.memberVariable="property",i.module="module",i.primitiveType="primitive type",i.script="script",i.type="type",i.variable="var",i.warning="warning",i.string="string",i.parameter="parameter",t.Kind=i;class r{}r.error="error",r.warning="warning",r.suggestion="suggestion",t.DiagnosticCategory=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0);function s(e){const t={module:"commonjs",target:"es2016",jsx:"preserve"};return e.checkJs&&(t.checkJs=!0),e.experimentalDecorators&&(t.experimentalDecorators=!0),t}t.isImplicitProjectConfigFile=function(e){return 0===e.indexOf("/dev/null/")},t.inferredProjectConfig=s,t.openOrCreateConfigFile=async function(e,t,n){const o=r.Uri.file(i.join(t,e?"tsconfig.json":"jsconfig.json")),a=r.window.activeTextEditor?r.window.activeTextEditor.viewColumn:void 0;try{const e=await r.workspace.openTextDocument(o);return r.window.showTextDocument(e,a)}catch(e){const t=await r.workspace.openTextDocument(o.with({scheme:"untitled"})),i=await r.window.showTextDocument(t,a);return 0===i.document.getText().length&&await i.insertSnippet(function(e){const t=s(e),n=Object.keys(t).map(e=>`"${e}": ${JSON.stringify(t[e])}`);return new r.SnippetString(`{\n\t"compilerOptions": {\n\t\t${n.join(",\n\t\t")}$0\n\t},\n\t"exclude": [\n\t\t"node_modules",\n\t\t"**/node_modules/*"\n\t]\n}`)}(n)),i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.file="file",t.untitled="untitled",t.walkThroughSnippet="walkThroughSnippet",t.supportedSchemes=[t.file,t.untitled,t.walkThroughSnippet],t.isSupportedScheme=function(e){return t.supportedSchemes.indexOf(e)>=0}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});const r=n(6),s=n(10),o=n(19);class a{constructor(e=(e=>e.fsPath)){this._normalizePath=e,this._map=new Map}get size(){return this._map.size}has(e){const t=this.toKey(e);return!!t&&this._map.has(t)}get(e){const t=this.toKey(e);if(!t)return;const n=this._map.get(t);return n?n.value:void 0}set(e,t){const n=this.toKey(e);if(!n)return;const i=this._map.get(n);i?i.value=t:this._map.set(n,{resource:e,value:t})}delete(e){const t=this.toKey(e);t&&this._map.delete(t)}clear(){this._map.clear()}get values(){return Array.from(this._map.values()).map(e=>e.value)}get entries(){return this._map.values()}toKey(e){const t=this._normalizePath(e);return t&&this.isCaseInsensitivePath(t)?t.toLowerCase():t}isCaseInsensitivePath(e){return!!c(e)||"/"===e[0]&&this.onIsCaseInsenitiveFileSystem}get onIsCaseInsenitiveFileSystem(){if("win32"===process.platform)return!0;if("darwin"!==process.platform)return!1;const e=o.getTempFile("typescript-case-check");return r.writeFileSync(e,""),r.existsSync(e.toUpperCase())}}function c(e){return/^[a-zA-Z]:\\/.test(e)}i([s.memoize],a.prototype,"onIsCaseInsenitiveFileSystem",null),t.ResourceMap=a,t.isWindowsPath=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(20),s=n(1);class o extends i.CodeLens{constructor(e,t,n){super(n),this.document=e,this.file=t}}t.ReferencesCodeLens=o;t.CachedNavTreeResponse=class{constructor(){this.version=-1,this.document=""}execute(e,t){return this.matches(e)?this.response:this.update(e,t())}matches(e){return this.version===e.version&&this.document===e.uri.toString()}update(e,t){return this.response=t,this.version=e.version,this.document=e.uri.toString(),t}};t.TypeScriptBaseCodeLensProvider=class{constructor(e,t){this.client=e,this.cachedResponse=t,this.onDidChangeCodeLensesEmitter=new i.EventEmitter}get onDidChangeCodeLenses(){return this.onDidChangeCodeLensesEmitter.event}async provideCodeLenses(e,t){const n=this.client.toPath(e.uri);if(!n)return[];const i=await this.cachedResponse.execute(e,()=>this.client.execute("navtree",{file:n},t));if(!i||"response"!==i.type)return[];const r=i.body,s=[];return r&&r.childItems&&r.childItems.forEach(t=>this.walkNavTree(e,t,null,s)),s.map(t=>new o(e.uri,n,t))}walkNavTree(e,t,n,i){if(!t)return;const r=this.extractSymbol(e,t,n);r&&i.push(r),(t.childItems||[]).forEach(n=>this.walkNavTree(e,n,t,i))}getSymbolRange(e,t){if(!t)return null;if(t.nameSpan)return s.Range.fromTextSpan(t.nameSpan);const n=t.spans&&t.spans[0];if(!n)return null;const o=s.Range.fromTextSpan(n),a=e.getText(o),c=new RegExp(`^(.*?(\\b|\\W))${r.escapeRegExp(t.text||"")}(\\b|\\W)`,"gm").exec(a),l=c?c.index+c[1].length:0,u=e.offsetAt(new i.Position(o.start.line,o.start.character))+l;return new i.Range(e.positionAt(u),e.positionAt(u+t.text.length))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);function r(e){switch(e.name){case"param":const t=(e.text||"").split(/^([\w\.]+)\s*-?\s*/);if(t&&3===t.length){const n=t[1],i=t[2],r=`*@${e.name}* \`${n}\``;return i?r+(i.match(/\r\n|\n/g)?"  \n"+i:` — ${i}`):r}}const t=`*@${e.name}*`,n=function(e){if(e.text){switch(e.name){case"example":case"default":return e.text.match(/^\s*[~`]{3}/g)?e.text:"```\n"+e.text+"\n```"}return e.text}}(e);return n?t+(n.match(/\r\n|\n/g)?"  \n"+n:` — ${n}`):t}function s(e){return e?e.map(e=>e.text).join(""):""}function o(e){return(e||[]).map(r).join("  \n\n")}function a(e,t,n){if(t&&e.appendMarkdown(s(t)),n){const t=o(n);t&&e.appendMarkdown("\n\n"+t)}return e}t.plain=s,t.tagsMarkdownPreview=o,t.markdownDocumentation=function(e,t){const n=new i.MarkdownString;return a(n,e,t),n},t.addMarkdownDocumentation=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.default=class{constructor(e){this.client=e}async getSymbolLocations(e,t,n,r){const s=this.client.toPath(t.uri);if(!s)return;const o=i.Position.toFileLocationRequestArgs(s,n),a=await this.client.execute(e,o,r);return"response"===a.type?(a&&a.body||[]).map(e=>i.Location.fromTextSpan(this.client.toResource(e.file),e)):void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equals=function(e,t,n=((e,t)=>e===t)){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0},t.flatten=function(e){return[].concat.apply([],e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(36);t.makeRandomHexString=function(e){let t=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n="";for(let i=0;i<e;i++)n+=t[Math.floor(t.length*Math.random())];return n},t.getTempFile=function(e){return i.join(r.tmpdir(),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(1);function s(e,t){return t.changes&&t.changes.length?r.WorkspaceEdit.fromFileCodeEdits(e,t.changes):void 0}async function o(e,t,n){if(t&&t.length)for(const i of t)await e.execute("applyCodeActionCommand",{command:i},n);return!0}t.getEditForCodeAction=s,t.applyCodeAction=async function(e,t,n){const r=s(e,t);return!(r&&!await i.workspace.applyEdit(r))&&o(e,t.commands,n)},t.applyCodeActionCommands=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(4),s=n(0),o=n(3),a=n(58),c=n(60),l=n(61),u=n(2),d=n(25),h=n(7),g=n(13),p=n(26),f=n(67),m=n(68),v=n(69),y=n(71),w=n(12),S=n(72),b=n(73),C=o.loadMessageBundle();t.PluginConfigProvider=class extends h.Disposable{constructor(){super(...arguments),this._config=new Map,this._onDidUpdateConfig=this._register(new s.EventEmitter),this.onDidUpdateConfig=this._onDidUpdateConfig.event}set(e,t){this._config.set(e,t),this._onDidUpdateConfig.fire({pluginId:e,config:t})}entries(){return this._config.entries()}};class _ extends h.Disposable{constructor(e,t,n,i,o,h){super(),this.workspaceState=e,this.onDidChangeTypeScriptVersion=t,this.plugins=n,this.pluginConfigProvider=i,this.logDirectoryProvider=o,this.logger=new f.default,this.isRestarting=!1,this._onTsServerStarted=this._register(new s.EventEmitter),this.onTsServerStarted=this._onTsServerStarted.event,this._onDiagnosticsReceived=this._register(new s.EventEmitter),this.onDiagnosticsReceived=this._onDiagnosticsReceived.event,this._onConfigDiagnosticsReceived=this._register(new s.EventEmitter),this.onConfigDiagnosticsReceived=this._onConfigDiagnosticsReceived.event,this._onResendModelsRequested=this._register(new s.EventEmitter),this.onResendModelsRequested=this._onResendModelsRequested.event,this._onProjectLanguageServiceStateChanged=this._register(new s.EventEmitter),this.onProjectLanguageServiceStateChanged=this._onProjectLanguageServiceStateChanged.event,this._onDidBeginInstallTypings=this._register(new s.EventEmitter),this.onDidBeginInstallTypings=this._onDidBeginInstallTypings.event,this._onDidEndInstallTypings=this._register(new s.EventEmitter),this.onDidEndInstallTypings=this._onDidEndInstallTypings.event,this._onTypesInstallerInitializationFailed=this._register(new s.EventEmitter),this.onTypesInstallerInitializationFailed=this._onTypesInstallerInitializationFailed.event,this._onSurveyReady=this._register(new s.EventEmitter),this.onSurveyReady=this._onSurveyReady.event,this.token=0,this.pathSeparator=r.sep,this.lastStart=Date.now();var g=new Promise((e,t)=>{this._onReady={promise:g,resolve:e,reject:t}});this._onReady.promise=g,this.forkedTsServer=null,this.lastError=null,this.numberRestarts=0,this._configuration=d.TypeScriptServiceConfiguration.loadFromWorkspace(),this.versionProvider=new b.TypeScriptVersionProvider(this._configuration),this.pluginPathsProvider=new m.TypeScriptPluginPathsProvider(this._configuration),this.versionPicker=new S.TypeScriptVersionPicker(this.versionProvider,this.workspaceState),this._apiVersion=u.default.defaultVersion,this._tsserverVersion=void 0,this.tracer=new y.default(this.logger),this.bufferSyncSupport=new a.default(this,h),this.onReady(()=>{this.bufferSyncSupport.listen()}),this.diagnosticsManager=new c.DiagnosticsManager("typescript"),this.bufferSyncSupport.onDelete(e=>{this.diagnosticsManager.delete(e)},null,this._disposables),s.workspace.onDidChangeConfiguration(()=>{const e=this._configuration;this._configuration=d.TypeScriptServiceConfiguration.loadFromWorkspace(),this.versionProvider.updateConfiguration(this._configuration),this.pluginPathsProvider.updateConfiguration(this._configuration),this.tracer.updateConfiguration(),this.forkedTsServer&&(this._configuration.checkJs===e.checkJs&&this._configuration.experimentalDecorators===e.experimentalDecorators||this.setCompilerOptionsForInferredProjects(this._configuration),this._configuration.isEqualTo(e)||this.restartTsServer())},this,this._disposables),this.telemetryReporter=this._register(new v.default(()=>this._tsserverVersion||this._apiVersion.versionString)),this.typescriptServerSpawner=new l.TypeScriptServerSpawner(this.versionProvider,this.logDirectoryProvider,this.pluginPathsProvider,this.logger,this.telemetryReporter,this.tracer),this._register(this.pluginConfigProvider.onDidUpdateConfig(e=>{this.configurePlugin(e.pluginId,e.config)}))}get configuration(){return this._configuration}dispose(){super.dispose(),this.bufferSyncSupport.dispose(),this.forkedTsServer&&this.forkedTsServer.kill(),this._tsServerLoading&&(this._tsServerLoading.reject(),this._tsServerLoading=void 0)}restartTsServer(){this.forkedTsServer&&(this.info("Killing TS Server"),this.isRestarting=!0,this.forkedTsServer.kill(),this.resetClientVersion()),this.forkedTsServer=this.startService(!0)}get apiVersion(){return this._apiVersion}onReady(e){return this._onReady.promise.then(e)}info(e,t){this.logger.info(e,t)}error(e,t){this.logger.error(e,t)}logTelemetry(e,t){this.telemetryReporter.logTelemetry(e,t)}service(){if(this.forkedTsServer)return this.forkedTsServer;if(this.lastError)throw this.lastError;if(this.startService(),this.forkedTsServer)return this.forkedTsServer;throw new Error("Could not create TS service")}ensureServiceStarted(){this.forkedTsServer||this.startService()}startService(e=!1){if(this.isDisposed)return null;let t=this.versionPicker.currentVersion;this.info(`Using tsserver from: ${t.path}`),i.existsSync(t.tsServerPath)||(s.window.showWarningMessage(C("noServerFound","The path {0} doesn't point to a valid tsserver install. Falling back to bundled TypeScript version.",t.path)),this.versionPicker.useBundledVersion(),t=this.versionPicker.currentVersion),this._apiVersion=this.versionPicker.currentVersion.version||u.default.defaultVersion,this.onDidChangeTypeScriptVersion(t),this.lastError=null;let n=++this.token;const r=this.typescriptServerSpawner.spawn(t,this.configuration,this.plugins);return this.lastStart=Date.now(),r.onError(e=>{this.token===n&&(e&&s.window.showErrorMessage(C("serverExitedWithError","TypeScript language server exited with error. Error message is: {0}",e.message||e.name)),this.lastError=e,this.error("TSServer errored with error.",e),r.tsServerLogFile&&this.error(`TSServer log file: ${r.tsServerLogFile}`),this.logTelemetry("tsserver.error"),this.serviceExited(!1),this.resetClientVersion())}),r.onExit(e=>{this.token===n&&(null===e||void 0===e?this.info("TSServer exited"):(this.error(`TSServer exited with code: ${e}`),this.logTelemetry("tsserver.exitWithCode",{code:e})),r.tsServerLogFile&&this.info(`TSServer log file: ${r.tsServerLogFile}`),this.serviceExited(!this.isRestarting),this.isRestarting=!1)}),r.onReaderError(e=>this.error("ReaderError",e)),r.onEvent(e=>this.dispatchEvent(e)),this._onReady.resolve(),this.forkedTsServer=r,this._onTsServerStarted.fire(t.version),this._tsServerLoading&&this._tsServerLoading.reject(),this._apiVersion.gte(u.default.v300)&&s.window.withProgress({location:s.ProgressLocation.Window,title:C("serverLoading.progress","Initializing JS/TS language features")},()=>new Promise((e,t)=>{this._tsServerLoading={resolve:e,reject:t}})),this.serviceStarted(e),r}onVersionStatusClicked(){return this.showVersionPicker(!1)}showVersionPicker(e){return this.versionPicker.show(e).then(t=>{!e&&t.newVersion&&t.oldVersion&&t.oldVersion.path!==t.newVersion.path&&this.restartTsServer()})}async openTsServerLogFile(){if(this.apiVersion.lt(u.default.v222))return s.window.showErrorMessage(C("typescript.openTsServerLog.notSupported","TS Server logging requires TS 2.2.2+")),!1;if(this._configuration.tsServerLogLevel===d.TsServerLogLevel.Off)return s.window.showErrorMessage(C("typescript.openTsServerLog.loggingNotEnabled","TS Server logging is off. Please set `typescript.tsserver.log` and restart the TS server to enable logging"),{title:C("typescript.openTsServerLog.enableAndReloadOption","Enable logging and restart TS server")}).then(e=>{if(e)return s.workspace.getConfiguration().update("typescript.tsserver.log","verbose",!0).then(()=>{this.restartTsServer()})}),!1;if(!this.forkedTsServer||!this.forkedTsServer.tsServerLogFile)return s.window.showWarningMessage(C("typescript.openTsServerLog.noLogFile","TS Server has not started logging.")),!1;try{return await s.commands.executeCommand("revealFileInOS",s.Uri.file(this.forkedTsServer.tsServerLogFile)),!0}catch(e){return s.window.showWarningMessage(C("openTsServerLog.openFileFailedFailed","Could not open TS Server log file")),!1}}serviceStarted(e){this.executeWithoutWaitingForResponse("configure",{hostInfo:"vscode"}),this.setCompilerOptionsForInferredProjects(this._configuration),e&&this._onResendModelsRequested.fire();for(const[e,t]of this.pluginConfigProvider.entries())this.configurePlugin(e,t)}setCompilerOptionsForInferredProjects(e){if(this.apiVersion.lt(u.default.v206))return;const t={options:this.getCompilerOptionsForInferredProjects(e)};this.executeWithoutWaitingForResponse("compilerOptionsForInferredProjects",t)}getCompilerOptionsForInferredProjects(e){return Object.assign({},w.inferredProjectConfig(e),{allowJs:!0,allowSyntheticDefaultImports:!0,allowNonTsExtensions:!0})}serviceExited(e){let t;if(this._tsServerLoading&&(this._tsServerLoading.reject(),this._tsServerLoading=void 0),function(e){e[e.reportIssue=0]="reportIssue"}(t||(t={})),this.forkedTsServer=null,e){const e=Date.now()-this.lastStart;this.numberRestarts++;let n=!0;if(this.numberRestarts>5){let i=void 0;this.numberRestarts=0,e<1e4?(this.lastStart=Date.now(),n=!1,i=s.window.showErrorMessage(C("serverDiedAfterStart","The TypeScript language service died 5 times right after it got started. The service will not be restarted."),{title:C("serverDiedReportIssue","Report Issue"),id:t.reportIssue}),this.logTelemetry("serviceExited"),this.resetClientVersion()):e<6e4&&(this.lastStart=Date.now(),i=s.window.showWarningMessage(C("serverDied","The TypeScript language service died unexpectedly 5 times in the last 5 Minutes."),{title:C("serverDiedReportIssue","Report Issue"),id:t.reportIssue})),i&&i.then(e=>{if(e&&e.id===t.reportIssue)return s.commands.executeCommand("workbench.action.reportIssues")})}n&&this.startService(!0)}else this.resetClientVersion()}normalizedPath(e){if(this._apiVersion.gte(u.default.v213)&&(e.scheme===g.walkThroughSnippet||e.scheme===g.untitled)){const t=r.dirname(e.path),n=this.inMemoryResourcePrefix+r.basename(e.path);return e.with({path:r.posix.join(t,n)}).toString(!0)}if(e.scheme!==g.file)return null;const t=e.fsPath;return t?t.replace(new RegExp("\\"+this.pathSeparator,"g"),"/"):null}toPath(e){return this.normalizedPath(e)}get inMemoryResourcePrefix(){return this._apiVersion.gte(u.default.v270)?"^":""}toResource(e){if(this._apiVersion.gte(u.default.v213)&&(e.startsWith(_.WALK_THROUGH_SNIPPET_SCHEME_COLON)||e.startsWith(g.untitled+":"))){let t=s.Uri.parse(e);if(this.inMemoryResourcePrefix){const e=r.dirname(t.path),n=r.basename(t.path);n.startsWith(this.inMemoryResourcePrefix)&&(t=t.with({path:r.posix.join(e,n.slice(this.inMemoryResourcePrefix.length))}))}return t}return this.bufferSyncSupport.toResource(e)}getWorkspaceRootForResource(e){const t=s.workspace.workspaceFolders;if(t&&t.length&&(e.scheme===g.file||e.scheme===g.untitled)){for(const n of t.sort((e,t)=>e.uri.fsPath.length-t.uri.fsPath.length))if(e.fsPath.startsWith(n.uri.fsPath+r.sep))return n.uri.fsPath;return t[0].uri.fsPath}}execute(e,t,n,i){return this.executeImpl(e,t,{isAsync:!1,token:n,expectsResult:!0,lowPriority:i})}executeWithoutWaitingForResponse(e,t){this.executeImpl(e,t,{isAsync:!1,token:void 0,expectsResult:!1})}executeAsync(e,t,n){return this.executeImpl(e,t,{isAsync:!0,token:n,expectsResult:!0})}executeImpl(e,t,n){const i=this.service();return i?i.executeImpl(e,t,n):Promise.reject(new Error("Could not load TS Server"))}interuptGetErr(e){return this.bufferSyncSupport.interuptGetErr(e)}dispatchEvent(e){switch(e.event){case"syntaxDiag":case"semanticDiag":case"suggestionDiag":this._tsServerLoading&&(this._tsServerLoading.resolve(),this._tsServerLoading=void 0);const t=e;t.body&&t.body.diagnostics&&this._onDiagnosticsReceived.fire({kind:function(e){switch(e.event){case"syntaxDiag":return 0;case"semanticDiag":return 1;case"suggestionDiag":return 2}throw new Error("Unknown dignostics kind")}(e),resource:this.toResource(t.body.file),diagnostics:t.body.diagnostics});break;case"configFileDiag":this._onConfigDiagnosticsReceived.fire(e);break;case"telemetry":const n=e.body;this.dispatchTelemetryEvent(n);break;case"projectLanguageServiceState":e.body&&this._onProjectLanguageServiceStateChanged.fire(e.body);break;case"projectsUpdatedInBackground":if(e.body){const t=e.body.openFiles.map(s.Uri.file);this.bufferSyncSupport.getErr(t)}break;case"beginInstallTypes":e.body&&this._onDidBeginInstallTypings.fire(e.body);break;case"endInstallTypes":e.body&&this._onDidEndInstallTypings.fire(e.body);break;case"typesInstallerInitializationFailed":e.body&&this._onTypesInstallerInitializationFailed.fire(e.body);break;case"surveyReady":e.body&&this._onSurveyReady.fire(e.body)}}dispatchTelemetryEvent(e){const t=Object.create(null);switch(e.telemetryEventName){case"typingsInstalled":const n=e.payload;t.installedPackages=n.installedPackages,p.defined(n.installSuccess)&&(t.installSuccess=n.installSuccess.toString()),p.string(n.typingsInstallerVersion)&&(t.typingsInstallerVersion=n.typingsInstallerVersion);break;default:const i=e.payload;i&&Object.keys(i).forEach(e=>{try{i.hasOwnProperty(e)&&(t[e]=p.string(i[e])?i[e]:JSON.stringify(i[e]))}catch(e){}})}"projectInfo"===e.telemetryEventName&&(this._tsserverVersion=t.version),this.logTelemetry(e.telemetryEventName,t)}resetClientVersion(){this._apiVersion=u.default.defaultVersion,this._tsserverVersion=void 0}configurePlugin(e,t){this._apiVersion.gte(u.default.v314)&&this.executeWithoutWaitingForResponse("configurePlugin",{pluginName:e,configuration:t})}}_.WALK_THROUGH_SNIPPET_SCHEME_COLON=`${g.walkThroughSnippet}:`,t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);t.allDiagnosticLangauges=[0,1],t.standardLanguageDescriptions=[{id:"typescript",diagnosticOwner:"typescript",diagnosticSource:"ts",diagnosticLanguage:1,modeIds:[i.typescript,i.typescriptreact],configFile:"tsconfig.json"},{id:"javascript",diagnosticOwner:"typescript",diagnosticSource:"ts",diagnosticLanguage:0,modeIds:[i.javascript,i.javascriptreact],configFile:"jsconfig.json"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CancelledResponse=class{constructor(e){this.reason=e,this.type="cancelled"}};t.NoContentResponse=class{constructor(){this.type="noContent"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(18);var s;!function(e){e[e.Off=0]="Off",e[e.Normal=1]="Normal",e[e.Terse=2]="Terse",e[e.Verbose=3]="Verbose"}(s=t.TsServerLogLevel||(t.TsServerLogLevel={})),function(e){e.fromString=function(t){switch(t&&t.toLowerCase()){case"normal":return e.Normal;case"terse":return e.Terse;case"verbose":return e.Verbose;case"off":default:return e.Off}},e.toString=function(t){switch(t){case e.Normal:return"normal";case e.Terse:return"terse";case e.Verbose:return"verbose";case e.Off:default:return"off"}}}(s=t.TsServerLogLevel||(t.TsServerLogLevel={}));class o{constructor(){this.tsServerLogLevel=s.Off;const e=i.workspace.getConfiguration();this.locale=o.extractLocale(e),this.globalTsdk=o.extractGlobalTsdk(e),this.localTsdk=o.extractLocalTsdk(e),this.npmLocation=o.readNpmLocation(e),this.tsServerLogLevel=o.readTsServerLogLevel(e),this.tsServerPluginPaths=o.readTsServerPluginPaths(e),this.checkJs=o.readCheckJs(e),this.experimentalDecorators=o.readExperimentalDecorators(e),this.disableAutomaticTypeAcquisition=o.readDisableAutomaticTypeAcquisition(e)}static loadFromWorkspace(){return new o}isEqualTo(e){return this.locale===e.locale&&this.globalTsdk===e.globalTsdk&&this.localTsdk===e.localTsdk&&this.npmLocation===e.npmLocation&&this.tsServerLogLevel===e.tsServerLogLevel&&this.checkJs===e.checkJs&&this.experimentalDecorators===e.experimentalDecorators&&this.disableAutomaticTypeAcquisition===e.disableAutomaticTypeAcquisition&&r.equals(this.tsServerPluginPaths,e.tsServerPluginPaths)}static extractGlobalTsdk(e){const t=e.inspect("typescript.tsdk");return t&&t.globalValue&&"string"==typeof t.globalValue?t.globalValue:null}static extractLocalTsdk(e){const t=e.inspect("typescript.tsdk");return t&&t.workspaceValue&&"string"==typeof t.workspaceValue?t.workspaceValue:null}static readTsServerLogLevel(e){const t=e.get("typescript.tsserver.log","off");return s.fromString(t)}static readTsServerPluginPaths(e){return e.get("typescript.tsserver.pluginPaths",[])}static readCheckJs(e){return e.get("javascript.implicitProjectConfig.checkJs",!1)}static readExperimentalDecorators(e){return e.get("javascript.implicitProjectConfig.experimentalDecorators",!1)}static readNpmLocation(e){return e.get("typescript.npm",null)}static readDisableAutomaticTypeAcquisition(e){return e.get("typescript.disableAutomaticTypeAcquisition",!1)}static extractLocale(e){return e.get("typescript.locale",null)}}t.TypeScriptServiceConfiguration=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Object.prototype.toString;t.defined=function(e){return void 0!==e},t.boolean=function(e){return!0===e||!1===e},t.string=function(e){return"[object String]"===i.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0);t.RelativeWorkspacePathResolver=class{asAbsoluteWorkspacePath(e){for(const t of r.workspace.workspaceFolders||[]){const n=[`./${t.name}/`,`${t.name}/`,`.\\${t.name}\\`,`${t.name}\\`];for(const r of n)if(e.startsWith(r))return i.join(t.uri.fsPath,e.replace(r,""))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(29),s=n(30),o=n(31),a=n(33),c=n(18),l=n(78),u=n(13),d=n(23),h=n(79),g=n(80),p=n(81),f=n(82),m=n(83),v=n(84),y=n(22);t.activate=function(e){const t=f.getContributedTypeScriptServerPlugins(),w=new y.PluginConfigProvider,S=new l.CommandManager;e.subscriptions.push(S);const b=function(e,t,n,i){return h.lazy(()=>{const r=new g.default(e),s=new a.default(d.standardLanguageDescriptions,e.workspaceState,t,n,i,r);e.subscriptions.push(s);const o=new v.Surveyor(e.globalState);return e.subscriptions.push(s.serviceClient.onSurveyReady(e=>o.surveyReady(e.surveyId))),s.serviceClient.onReady(()=>{e.subscriptions.push(m.create(s.serviceClient,s.serviceClient.telemetryReporter))}),s})}(e,t,w,S);!function(e,t,n){e.register(new r.ReloadTypeScriptProjectsCommand(t)),e.register(new r.ReloadJavaScriptProjectsCommand(t)),e.register(new r.SelectTypeScriptVersionCommand(t)),e.register(new r.OpenTsServerLogCommand(t)),e.register(new r.RestartTsServerCommand(t)),e.register(new r.TypeScriptGoToProjectConfigCommand(t)),e.register(new r.JavaScriptGoToProjectConfigCommand(t)),e.register(new r.ConfigurePluginCommand(n))}(S,b,w),e.subscriptions.push(new o.default(b.map(e=>e.serviceClient))),e.subscriptions.push(new s.LanguageConfigurationManager),Promise.resolve().then(()=>n(85)).then(t=>{e.subscriptions.push(t.register())});const C=c.flatten([...d.standardLanguageDescriptions.map(e=>e.modeIds),...t.map(e=>e.languages)]);function _(t){return!!function(e,t){return!(e.indexOf(t.languageId)<0)&&u.isSupportedScheme(t.uri.scheme)}(C,t)&&(T.dispose(),b.value,e.subscriptions.push(new p.default(e=>b.value.serviceClient.toPath(e))),!0)}const T=i.workspace.onDidOpenTextDocument(_,void 0,e.subscriptions);for(const e of i.workspace.textDocuments)if(_(e))break}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(12),o=n(9),a=r.loadMessageBundle();t.ReloadTypeScriptProjectsCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.reloadProjects"}execute(){this.lazyClientHost.value.reloadProjects()}};t.ReloadJavaScriptProjectsCommand=class{constructor(e){this.lazyClientHost=e,this.id="javascript.reloadProjects"}execute(){this.lazyClientHost.value.reloadProjects()}};t.SelectTypeScriptVersionCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.selectTypeScriptVersion"}execute(){this.lazyClientHost.value.serviceClient.onVersionStatusClicked()}};t.OpenTsServerLogCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.openTsServerLog"}execute(){this.lazyClientHost.value.serviceClient.openTsServerLogFile()}};t.RestartTsServerCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.restartTsServer"}execute(){this.lazyClientHost.value.serviceClient.restartTsServer()}};t.TypeScriptGoToProjectConfigCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.goToProjectConfig"}execute(){const e=i.window.activeTextEditor;e&&c(this.lazyClientHost.value,!0,e.document.uri)}};t.JavaScriptGoToProjectConfigCommand=class{constructor(e){this.lazyClientHost=e,this.id="javascript.goToProjectConfig"}execute(){const e=i.window.activeTextEditor;e&&c(this.lazyClientHost.value,!1,e.document.uri)}};async function c(e,t,n){const r=e.serviceClient,c=r.getWorkspaceRootForResource(n);if(!c)return void i.window.showInformationMessage(a("typescript.projectConfigNoWorkspace","Please open a folder in VS Code to use a TypeScript or JavaScript project"));const l=r.toPath(n);if(!l||!await e.handles(n))return void i.window.showWarningMessage(a("typescript.projectConfigUnsupportedFile","Could not determine TypeScript or JavaScript project. Unsupported file type"));let u=void 0;try{u=await r.execute("projectInfo",{file:l,needFileNameList:!1},o.nulToken)}catch(e){}if(!u||!u.body)return void i.window.showWarningMessage(a("typescript.projectConfigCouldNotGetInfo","Could not determine TypeScript or JavaScript project"));const{configFileName:d}=u.body;if(d&&!s.isImplicitProjectConfigFile(d)){const e=await i.workspace.openTextDocument(d);return void i.window.showTextDocument(e,i.window.activeTextEditor?i.window.activeTextEditor.viewColumn:void 0)}let h;!function(e){e[e.None=0]="None",e[e.CreateConfig=1]="CreateConfig",e[e.LearnMore=2]="LearnMore"}(h||(h={}));const g=await i.window.showInformationMessage(t?a("typescript.noTypeScriptProjectConfig","File is not part of a TypeScript project. Click [here]({0}) to learn more.","https://go.microsoft.com/fwlink/?linkid=841896"):a("typescript.noJavaScriptProjectConfig","File is not part of a JavaScript project Click [here]({0}) to learn more.","https://go.microsoft.com/fwlink/?linkid=759670"),{title:t?a("typescript.configureTsconfigQuickPick","Configure tsconfig.json"):a("typescript.configureJsconfigQuickPick","Configure jsconfig.json"),id:h.CreateConfig});switch(g&&g.id){case h.CreateConfig:return void s.openOrCreateConfigFile(t,c,r.configuration)}}t.ConfigurePluginCommand=class{constructor(e){this.pluginConfigProvider=e,this.id="_typescript.configurePlugin"}execute(e,t){this.pluginConfigProvider.set(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(7),s=n(8),o={indentationRules:{decreaseIndentPattern:/^((?!.*?\/\*).*\*\/)?\s*[\}\]].*$/,increaseIndentPattern:/^((?!\/\/).)*(\{[^}"'`]*|\([^)"'`]*|\[[^\]"'`]*)$/},wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:i.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:i.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|[ ])*[ ]\*([ ]([^\*]|\*(?!\/))*)?$/,oneLineAboveText:/^(\s*(\/\*\*|\*)).*/,action:{indentAction:i.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|[ ])*[ ]\*\/\s*$/,action:{indentAction:i.IndentAction.None,removeText:1}},{beforeText:/^(\t|[ ])*[ ]\*[^/]*\*\/\s*$/,action:{indentAction:i.IndentAction.None,removeText:1}}]},a=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],c={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,onEnterRules:[{beforeText:new RegExp(`<(?!(?:${a.join("|")}))([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>$/i,action:{indentAction:i.IndentAction.IndentOutdent}},{beforeText:new RegExp(`<(?!(?:${a.join("|")}))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),action:{indentAction:i.IndentAction.Indent}}]};t.LanguageConfigurationManager=class extends r.Disposable{constructor(){super();const e=[s.javascript,s.javascriptreact,s.typescript,s.typescriptreact];for(const t of e)this.registerConfiguration(t,o);this.registerConfiguration(s.jsxTags,c)}registerConfiguration(e,t){this._register(i.languages.setLanguageConfiguration(e,t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(4),s=n(0),o=n(3),a=n(12),c=n(32),l=o.loadMessageBundle(),u=e=>new Promise((t,n)=>{i.exists(e,e=>{t(e)})});class d{constructor(e){this.client=e,this.autoDetect="on",this.disposables=[],this.tsconfigProvider=new c.default,s.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this,this.disposables),this.onConfigurationChanged()}dispose(){this.disposables.forEach(e=>e.dispose())}async provideTasks(e){const t=s.workspace.workspaceFolders;if(!t||!t.length)return[];const n=new Set,i=[];for(const t of await this.getAllTsConfigs(e))n.has(t.path)||(n.add(t.path),i.push(...await this.getTasksForProject(t)));return i}resolveTask(e){}async getAllTsConfigs(e){const t=new Set,n=[...await this.getTsConfigForActiveFile(e),...await this.getTsConfigsInWorkspace()];for(const e of n)await u(e.path)&&t.add(e);return Array.from(t)}async getTsConfigForActiveFile(e){const t=s.window.activeTextEditor;if(t&&r.basename(t.document.fileName).match(/^tsconfig\.(.\.)?json$/)){const e=t.document.uri;return[{path:e.fsPath,workspaceFolder:s.workspace.getWorkspaceFolder(e)}]}const n=this.getActiveTypeScriptFile();if(!n)return[];const i=await this.client.value.execute("projectInfo",{file:n,needFileNameList:!1},e);if("response"!==i.type||!i.body)return[];const{configFileName:o}=i.body;if(o&&!a.isImplicitProjectConfigFile(o)){const e=r.normalize(o),t=s.Uri.file(e);return[{path:e,workspaceFolder:s.workspace.getWorkspaceFolder(t)}]}return[]}async getTsConfigsInWorkspace(){return Array.from(await this.tsconfigProvider.getConfigsForWorkspace())}static async getCommand(e){if(e.workspaceFolder){const t=await d.getLocalTscAtPath(r.dirname(e.path));if(t)return t;const n=await d.getLocalTscAtPath(e.workspaceFolder.uri.fsPath);if(n)return n}return"tsc"}static async getLocalTscAtPath(e){const t=process.platform,n=r.join(e,"node_modules",".bin");return"win32"===t&&await u(r.join(n,"tsc.cmd"))?r.join(n,"tsc.cmd"):"linux"!==t&&"darwin"!==t||!await u(r.join(n,"tsc"))?void 0:r.join(n,"tsc")}getActiveTypeScriptFile(){const e=s.window.activeTextEditor;if(e){const t=e.document;if(t&&("typescript"===t.languageId||"typescriptreact"===t.languageId))return this.client.value.toPath(t.uri)}return null}async getTasksForProject(e){const t=await d.getCommand(e),n=await this.getBuildShellArgs(e),i=this.getLabelForTasks(e),r=[];if("build"===this.autoDetect||"on"===this.autoDetect){const o={type:"typescript",tsconfig:i},a=new s.Task(o,e.workspaceFolder||s.TaskScope.Workspace,l("buildTscLabel","build - {0}",i),"tsc",new s.ShellExecution(t,n),"$tsc");a.group=s.TaskGroup.Build,a.isBackground=!1,r.push(a)}if("watch"===this.autoDetect||"on"===this.autoDetect){const o={type:"typescript",tsconfig:i,option:"watch"},a=new s.Task(o,e.workspaceFolder||s.TaskScope.Workspace,l("buildAndWatchTscLabel","watch - {0}",i),"tsc",new s.ShellExecution(t,["--watch",...n]),"$tsc-watch");a.group=s.TaskGroup.Build,a.isBackground=!0,r.push(a)}return r}getBuildShellArgs(e){const t=["-p",e.path];return new Promise(n=>{i.readFile(e.path,(i,r)=>{if(i)return n(t);try{if(JSON.parse(r.toString()).references)return n(["-b",e.path])}catch(e){}return n(t)})})}getLabelForTasks(e){if(e.workspaceFolder){const t=e.workspaceFolder,n=s.workspace.workspaceFolders,i=r.relative(e.workspaceFolder.uri.fsPath,e.path);return n&&n.length>1?n.filter(e=>e.name===t.name).length>1?r.join(e.workspaceFolder.uri.fsPath,i):r.join(e.workspaceFolder.name,i):i}return e.path}onConfigurationChanged(){const e=s.workspace.getConfiguration("typescript.tsc").get("autoDetect");this.autoDetect=void 0===e?"on":e}}t.default=class{constructor(e){this.client=e,this.taskProviderSub=void 0,this.disposables=[],s.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this,this.disposables),this.onConfigurationChanged()}dispose(){this.taskProviderSub&&(this.taskProviderSub.dispose(),this.taskProviderSub=void 0),this.disposables.forEach(e=>e.dispose())}onConfigurationChanged(){const e=s.workspace.getConfiguration("typescript.tsc").get("autoDetect");this.taskProviderSub&&"off"===e?(this.taskProviderSub.dispose(),this.taskProviderSub=void 0):this.taskProviderSub||"off"===e||(this.taskProviderSub=s.workspace.registerTaskProvider("typescript",new d(this.client)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=class{async getConfigsForWorkspace(){if(!i.workspace.workspaceFolders)return[];const e=new Map;for(const t of await i.workspace.findFiles("**/tsconfig*.json","**/node_modules/**")){const n=i.workspace.getWorkspaceFolder(t);n&&e.set(t.fsPath,{path:t.fsPath,workspaceFolder:n})}return e.values()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(34),s=n(37),o=n(11),a=n(22),c=n(2),l=n(7),u=n(1),d=n(74),h=n(75),g=[6133,6138,7027,7028,7029,7030];t.default=class extends l.Disposable{constructor(e,t,o,l,u,g){super(),this.commandManager=u,this.languages=[],this.languagePerId=new Map,this.reportStyleCheckAsWarnings=!0;const p=()=>{this.client.executeWithoutWaitingForResponse("reloadProjects",null),this.triggerAllDiagnostics()},f=this._register(i.workspace.createFileSystemWatcher("**/[tj]sconfig.json"));f.onDidCreate(p,this,this._disposables),f.onDidDelete(p,this,this._disposables),f.onDidChange(()=>{setTimeout(()=>{this.triggerAllDiagnostics()},1500)},this,this._disposables);const m=this.getAllModeIds(e);this.client=this._register(new a.default(t,e=>this.versionStatus.onDidChangeTypeScriptVersion(e),o,l,g,m)),this.client.onDiagnosticsReceived(({kind:e,resource:t,diagnostics:n})=>{this.diagnosticsReceived(e,t,n)},null,this._disposables),this.client.onConfigDiagnosticsReceived(e=>this.configFileDiagnosticsReceived(e),null,this._disposables),this.client.onResendModelsRequested(()=>this.populateService(),null,this._disposables),this.versionStatus=this._register(new h.default(e=>this.client.toPath(e))),this._register(new d.AtaProgressReporter(this.client)),this.typingsStatus=this._register(new d.default(this.client)),this.fileConfigurationManager=this._register(new r.default(this.client));for(const t of e){const e=new s.default(this.client,t,this.commandManager,this.client.telemetryReporter,this.typingsStatus,this.fileConfigurationManager);this.languages.push(e),this._register(e),this.languagePerId.set(t.id,e)}Promise.resolve().then(()=>n(76)).then(e=>this._register(e.register(this.client,this.fileConfigurationManager,e=>this.handles(e)))),Promise.resolve().then(()=>n(77)).then(e=>this._register(e.register(this.client,m))),this.client.ensureServiceStarted(),this.client.onReady(()=>{if(this.client.apiVersion.lt(c.default.v230))return;const e=new Set;for(const t of o)for(const n of t.languages)e.add(n);if(e.size){const t={id:"typescript-plugins",modeIds:Array.from(e.values()),diagnosticSource:"ts-plugin",diagnosticLanguage:1,diagnosticOwner:"typescript",isExternal:!0},n=new s.default(this.client,t,this.commandManager,this.client.telemetryReporter,this.typingsStatus,this.fileConfigurationManager);this.languages.push(n),this._register(n),this.languagePerId.set(t.id,n)}}),this.client.onTsServerStarted(()=>{this.triggerAllDiagnostics()}),i.workspace.onDidChangeConfiguration(this.configurationChanged,this,this._disposables),this.configurationChanged()}getAllModeIds(e){const t=[];for(const n of e)t.push(...n.modeIds);return t}get serviceClient(){return this.client}reloadProjects(){this.client.executeWithoutWaitingForResponse("reloadProjects",null),this.triggerAllDiagnostics()}async handles(e){return!!await this.findLanguage(e)||this.client.bufferSyncSupport.handles(e)}configurationChanged(){const e=i.workspace.getConfiguration("typescript");this.reportStyleCheckAsWarnings=e.get("reportStyleChecksAsWarnings",!0)}async findLanguage(e){try{const t=await i.workspace.openTextDocument(e);return this.languages.find(n=>n.handles(e,t))}catch(e){return}}triggerAllDiagnostics(){for(const e of this.languagePerId.values())e.triggerAllDiagnostics()}populateService(){this.fileConfigurationManager.reset(),this.client.bufferSyncSupport.reOpenDocuments(),this.client.bufferSyncSupport.requestAllDiagnostics(),i.workspace.saveAll(!1).then(()=>{for(const e of this.languagePerId.values())e.reInitialize()})}async diagnosticsReceived(e,t,n){const i=await this.findLanguage(t);i&&i.diagnosticsReceived(e,t,this.createMarkerDatas(n,i.diagnosticSource))}configFileDiagnosticsReceived(e){const t=e.body;t&&t.diagnostics&&t.configFile&&this.findLanguage(this.client.toResource(t.configFile)).then(e=>{e&&(0===t.diagnostics.length?e.configFileDiagnosticsReceived(this.client.toResource(t.configFile),[]):t.diagnostics.length>=1&&i.workspace.openTextDocument(i.Uri.file(t.configFile)).then(n=>{let r,s=void 0,o=void 0;for(let e=0;e<n.lineCount;e++){const t=n.lineAt(e),i=t.text,r=t.firstNonWhitespaceCharacterIndex;if(r<i.length){if("{"===i.charAt(r)){s=[e,r,r+1];break}{const t=/\s*([^\s]*)(?:\s*|$)/.exec(i.substr(r));t&&t.length>=1&&(o=[e,r,r+t[1].length])}}}const a=s||o;(r=a?new i.Diagnostic(new i.Range(a[0],a[1],a[0],a[2]),t.diagnostics[0].text):new i.Diagnostic(new i.Range(0,0,0,0),t.diagnostics[0].text))&&(r.source=e.diagnosticSource,e.configFileDiagnosticsReceived(this.client.toResource(t.configFile),[r]))},n=>{e.configFileDiagnosticsReceived(this.client.toResource(t.configFile),[new i.Diagnostic(new i.Range(0,0,0,0),t.diagnostics[0].text)])}))})}createMarkerDatas(e,t){return e.map(e=>this.tsDiagnosticToVsDiagnostic(e,t))}tsDiagnosticToVsDiagnostic(e,t){const{start:n,end:r,text:s}=e,o=new i.Range(u.Position.fromLocation(n),u.Position.fromLocation(r)),a=new i.Diagnostic(o,s);a.severity=this.getDiagnosticSeverity(e),a.source=e.source||t,e.code&&(a.code=e.code);const c=e.relatedInformation;return c&&(a.relatedInformation=c.map(e=>{let t=e.span;if(t)return new i.DiagnosticRelatedInformation(u.Location.fromTextSpan(this.client.toResource(t.file),t),e.message)}).filter(e=>!!e)),e.reportsUnnecessary&&(a.tags=[i.DiagnosticTag.Unnecessary]),a.reportUnnecessary=e.reportsUnnecessary,a}getDiagnosticSeverity(e){if(this.reportStyleCheckAsWarnings&&this.isStyleCheckDiagnostic(e.code)&&e.category===o.DiagnosticCategory.error)return i.DiagnosticSeverity.Warning;switch(e.category){case o.DiagnosticCategory.error:return i.DiagnosticSeverity.Error;case o.DiagnosticCategory.warning:return i.DiagnosticSeverity.Warning;case o.DiagnosticCategory.suggestion:return i.DiagnosticSeverity.Hint;default:return i.DiagnosticSeverity.Error}}isStyleCheckDiagnostic(e){return!!e&&-1!==g.indexOf(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(8),o=n(14);function a(e,t){let n=Object.keys(e);for(let i=0;i<n.length;i++){let r=n[i];if(e[r]!==t[r])return!1}return!0}t.default=class{constructor(e){this.client=e,this.formatOptions=new o.ResourceMap,this.onDidCloseTextDocumentSub=i.workspace.onDidCloseTextDocument(e=>{this.formatOptions.delete(e.uri)})}dispose(){this.onDidCloseTextDocumentSub&&(this.onDidCloseTextDocumentSub.dispose(),this.onDidCloseTextDocumentSub=void 0)}async ensureConfigurationForDocument(e,t){const n=this.getFormattingOptions(e);if(n)return this.ensureConfigurationOptions(e,n,t)}getFormattingOptions(e){const t=i.window.visibleTextEditors.find(t=>t.document.fileName===e.fileName);return t?{tabSize:t.options.tabSize,insertSpaces:t.options.insertSpaces}:void 0}async ensureConfigurationOptions(e,t,n){const i=this.client.toPath(e.uri);if(!i)return;const r=this.getFileOptions(e,t),s=this.formatOptions.get(e.uri);if(s){const e=await s;if(e&&function(e,t){return a(e.formatOptions,t.formatOptions)&&a(e.preferences,t.preferences)}(e,r))return}let o;this.formatOptions.set(e.uri,new Promise(e=>o=e));const c=Object.assign({file:i},r);try{const e=await this.client.execute("configure",c,n);o("response"===e.type?r:void 0)}finally{o(void 0)}}async setGlobalConfigurationFromDocument(e,t){const n=this.getFormattingOptions(e);if(!n)return;const i=Object.assign({file:void 0},this.getFileOptions(e,n));await this.client.execute("configure",i,t)}reset(){this.formatOptions.clear()}getFileOptions(e,t){return{formatOptions:this.getFormatOptions(e,t),preferences:this.getPreferences(e)}}getFormatOptions(e,t){const n=i.workspace.getConfiguration(s.isTypeScriptDocument(e)?"typescript.format":"javascript.format",e.uri);return{tabSize:t.tabSize,indentSize:t.tabSize,convertTabsToSpaces:t.insertSpaces,newLineCharacter:"\n",insertSpaceAfterCommaDelimiter:n.get("insertSpaceAfterCommaDelimiter"),insertSpaceAfterConstructor:n.get("insertSpaceAfterConstructor"),insertSpaceAfterSemicolonInForStatements:n.get("insertSpaceAfterSemicolonInForStatements"),insertSpaceBeforeAndAfterBinaryOperators:n.get("insertSpaceBeforeAndAfterBinaryOperators"),insertSpaceAfterKeywordsInControlFlowStatements:n.get("insertSpaceAfterKeywordsInControlFlowStatements"),insertSpaceAfterFunctionKeywordForAnonymousFunctions:n.get("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),insertSpaceBeforeFunctionParenthesis:n.get("insertSpaceBeforeFunctionParenthesis"),insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:n.get("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:n.get("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),insertSpaceAfterTypeAssertion:n.get("insertSpaceAfterTypeAssertion"),placeOpenBraceOnNewLineForFunctions:n.get("placeOpenBraceOnNewLineForFunctions"),placeOpenBraceOnNewLineForControlBlocks:n.get("placeOpenBraceOnNewLineForControlBlocks")}}getPreferences(e){if(this.client.apiVersion.lt(r.default.v290))return{};const t=i.workspace.getConfiguration(s.isTypeScriptDocument(e)?"typescript.preferences":"javascript.preferences",e.uri);return{quotePreference:function(e){switch(e.get("quoteStyle")){case"single":return"single";case"double":return"double";default:return}}(t),importModuleSpecifierPreference:function(e){switch(e.get("importModuleSpecifier")){case"relative":return"relative";case"non-relative":return"non-relative";default:return}}(t),allowTextChangesInNewFiles:"file"===e.uri.scheme}}}},function(e,t){var n;t=e.exports=U,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,s=t.re=[],o=t.src=[],a=0,c=a++;o[c]="0|[1-9]\\d*";var l=a++;o[l]="[0-9]+";var u=a++;o[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;o[d]="("+o[c]+")\\.("+o[c]+")\\.("+o[c]+")";var h=a++;o[h]="("+o[l]+")\\.("+o[l]+")\\.("+o[l]+")";var g=a++;o[g]="(?:"+o[c]+"|"+o[u]+")";var p=a++;o[p]="(?:"+o[l]+"|"+o[u]+")";var f=a++;o[f]="(?:-("+o[g]+"(?:\\."+o[g]+")*))";var m=a++;o[m]="(?:-?("+o[p]+"(?:\\."+o[p]+")*))";var v=a++;o[v]="[0-9A-Za-z-]+";var y=a++;o[y]="(?:\\+("+o[v]+"(?:\\."+o[v]+")*))";var w=a++,S="v?"+o[d]+o[f]+"?"+o[y]+"?";o[w]="^"+S+"$";var b="[v=\\s]*"+o[h]+o[m]+"?"+o[y]+"?",C=a++;o[C]="^"+b+"$";var _=a++;o[_]="((?:<|>)?=?)";var T=a++;o[T]=o[l]+"|x|X|\\*";var k=a++;o[k]=o[c]+"|x|X|\\*";var x=a++;o[x]="[v=\\s]*("+o[k]+")(?:\\.("+o[k]+")(?:\\.("+o[k]+")(?:"+o[f]+")?"+o[y]+"?)?)?";var P=a++;o[P]="[v=\\s]*("+o[T]+")(?:\\.("+o[T]+")(?:\\.("+o[T]+")(?:"+o[m]+")?"+o[y]+"?)?)?";var R=a++;o[R]="^"+o[_]+"\\s*"+o[x]+"$";var D=a++;o[D]="^"+o[_]+"\\s*"+o[P]+"$";var A=a++;o[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var E=a++;o[E]="(?:~>?)";var j=a++;o[j]="(\\s*)"+o[E]+"\\s+",s[j]=new RegExp(o[j],"g");var F=a++;o[F]="^"+o[E]+o[x]+"$";var O=a++;o[O]="^"+o[E]+o[P]+"$";var I=a++;o[I]="(?:\\^)";var M=a++;o[M]="(\\s*)"+o[I]+"\\s+",s[M]=new RegExp(o[M],"g");var L=a++;o[L]="^"+o[I]+o[x]+"$";var V=a++;o[V]="^"+o[I]+o[P]+"$";var N=a++;o[N]="^"+o[_]+"\\s*("+b+")$|^$";var K=a++;o[K]="^"+o[_]+"\\s*("+S+")$|^$";var q=a++;o[q]="(\\s*)"+o[_]+"\\s*("+b+"|"+o[x]+")",s[q]=new RegExp(o[q],"g");var B=a++;o[B]="^\\s*("+o[x]+")\\s+-\\s+("+o[x]+")\\s*$";var $=a++;o[$]="^\\s*("+o[P]+")\\s+-\\s+("+o[P]+")\\s*$";var W=a++;o[W]="(<|>)?=?\\s*\\*";for(var z=0;z<a;z++)n(z,o[z]),s[z]||(s[z]=new RegExp(o[z]));function J(e,t){if(e instanceof U)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t?s[C]:s[w]).test(e))return null;try{return new U(e,t)}catch(e){return null}}function U(e,t){if(e instanceof U){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof U))return new U(e,t);n("SemVer",e,t),this.loose=t;var o=e.trim().match(t?s[C]:s[w]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=J,t.valid=function(e,t){var n=J(e,t);return n?n.version:null},t.clean=function(e,t){var n=J(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=U,U.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},U.prototype.toString=function(){return this.version},U.prototype.compare=function(e){return n("SemVer.compare",this.version,this.loose,e),e instanceof U||(e=new U(e,this.loose)),this.compareMain(e)||this.comparePre(e)},U.prototype.compareMain=function(e){return e instanceof U||(e=new U(e,this.loose)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},U.prototype.comparePre=function(e){if(e instanceof U||(e=new U(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var i=this.prerelease[t],r=e.prerelease[t];if(n("prerelease compare",t,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return G(i,r)}while(++t)},U.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,i){"string"==typeof n&&(i=n,n=void 0);try{return new U(e,n).inc(t,i).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var n=J(e),i=J(t);if(n.prerelease.length||i.prerelease.length){for(var r in n)if(("major"===r||"minor"===r||"patch"===r)&&n[r]!==i[r])return"pre"+r;return"prerelease"}for(var r in n)if(("major"===r||"minor"===r||"patch"===r)&&n[r]!==i[r])return r},t.compareIdentifiers=G;var H=/^[0-9]+$/;function G(e,t){var n=H.test(e),i=H.test(t);return n&&i&&(e=+e,t=+t),n&&!i?-1:i&&!n?1:e<t?-1:e>t?1:0}function Q(e,t,n){return new U(e,n).compare(new U(t,n))}function X(e,t,n){return Q(e,t,n)>0}function Z(e,t,n){return Q(e,t,n)<0}function Y(e,t,n){return 0===Q(e,t,n)}function ee(e,t,n){return 0!==Q(e,t,n)}function te(e,t,n){return Q(e,t,n)>=0}function ne(e,t,n){return Q(e,t,n)<=0}function ie(e,t,n,i){var r;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),r=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),r=e!==n;break;case"":case"=":case"==":r=Y(e,n,i);break;case"!=":r=ee(e,n,i);break;case">":r=X(e,n,i);break;case">=":r=te(e,n,i);break;case"<":r=Z(e,n,i);break;case"<=":r=ne(e,n,i);break;default:throw new TypeError("Invalid operator: "+t)}return r}function re(e,t){if(e instanceof re){if(e.loose===t)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.loose=t,this.parse(e),this.semver===se?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new U(e,t).major},t.minor=function(e,t){return new U(e,t).minor},t.patch=function(e,t){return new U(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,n){return Q(t,e,n)},t.sort=function(e,n){return e.sort(function(e,i){return t.compare(e,i,n)})},t.rsort=function(e,n){return e.sort(function(e,i){return t.rcompare(e,i,n)})},t.gt=X,t.lt=Z,t.eq=Y,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=ie,t.Comparator=re;var se={};function oe(e,t){if(e instanceof oe)return e.loose===t?e:new oe(e.raw,t);if(e instanceof re)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,i,r,s,o,a,c,l,u,d,h){return((t=ae(n)?"":ae(i)?">="+n+".0.0":ae(r)?">="+n+"."+i+".0":">="+t)+" "+(a=ae(c)?"":ae(l)?"<"+(+c+1)+".0.0":ae(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function le(e,t){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==se&&e[i].semver.prerelease.length>0){var r=e[i].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new oe(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,i){var r,s,o,a,c;switch(e=new U(e,i),t=new oe(t,i),n){case">":r=X,s=ne,o=Z,a=">",c=">=";break;case"<":r=Z,s=te,o=X,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,i))return!1;for(var l=0;l<t.set.length;++l){var u=null,d=null;if(t.set[l].forEach(function(e){e.semver===se&&(e=new re(">=0.0.0")),u=u||e,d=d||e,r(e.semver,u.semver,i)?u=e:o(e.semver,d.semver,i)&&(d=e)}),u.operator===a||u.operator===c)return!1;if((!d.operator||d.operator===a)&&s(e,d.semver))return!1;if(d.operator===c&&o(e,d.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.loose?s[N]:s[K],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new U(n[2],this.loose):this.semver=se},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.loose),this.semver===se||("string"==typeof e&&(e=new U(e,this.loose)),ie(e,this.operator,this.semver,this.loose))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new oe(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),ue(e.semver,n,t);var i=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ie(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ie(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return i||r||s&&o||a||c},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n("range",e,t);var i=t?s[$]:s[B];e=e.replace(i,ce),n("hyphen replace",e),e=e.replace(s[q],"$1$2$3"),n("comparator trim",e,s[q]),e=(e=(e=e.replace(s[j],"$1~")).replace(s[M],"$1^")).split(/\s+/).join(" ");var r=t?s[N]:s[K],o=e.split(" ").map(function(e){return function(e,t){return n("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var i=t?s[V]:s[L];return e.replace(i,function(t,i,r,s,o){var a;return n("caret",e,t,i,r,s,o),ae(i)?a="":ae(r)?a=">="+i+".0.0 <"+(+i+1)+".0.0":ae(s)?a="0"===i?">="+i+"."+r+".0 <"+i+"."+(+r+1)+".0":">="+i+"."+r+".0 <"+(+i+1)+".0.0":o?(n("replaceCaret pr",o),"-"!==o.charAt(0)&&(o="-"+o),a="0"===i?"0"===r?">="+i+"."+r+"."+s+o+" <"+i+"."+r+"."+(+s+1):">="+i+"."+r+"."+s+o+" <"+i+"."+(+r+1)+".0":">="+i+"."+r+"."+s+o+" <"+(+i+1)+".0.0"):(n("no pr"),a="0"===i?"0"===r?">="+i+"."+r+"."+s+" <"+i+"."+r+"."+(+s+1):">="+i+"."+r+"."+s+" <"+i+"."+(+r+1)+".0":">="+i+"."+r+"."+s+" <"+(+i+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var i=t?s[O]:s[F];return e.replace(i,function(t,i,r,s,o){var a;return n("tilde",e,t,i,r,s,o),ae(i)?a="":ae(r)?a=">="+i+".0.0 <"+(+i+1)+".0.0":ae(s)?a=">="+i+"."+r+".0 <"+i+"."+(+r+1)+".0":o?(n("replaceTilde pr",o),"-"!==o.charAt(0)&&(o="-"+o),a=">="+i+"."+r+"."+s+o+" <"+i+"."+(+r+1)+".0"):a=">="+i+"."+r+"."+s+" <"+i+"."+(+r+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var i=t?s[D]:s[R];return e.replace(i,function(t,i,r,s,o,a){n("xRange",e,t,i,r,s,o,a);var c=ae(r),l=c||ae(s),u=l||ae(o),d=u;return"="===i&&d&&(i=""),c?t=">"===i||"<"===i?"<0.0.0":"*":i&&d?(l&&(s=0),u&&(o=0),">"===i?(i=">=",l?(r=+r+1,s=0,o=0):u&&(s=+s+1,o=0)):"<="===i&&(i="<",l?r=+r+1:s=+s+1),t=i+r+"."+s+"."+o):l?t=">="+r+".0.0 <"+(+r+1)+".0.0":u&&(t=">="+r+"."+s+".0 <"+r+"."+(+s+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(s[W],"")}(e,t),n("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(o=o.filter(function(e){return!!e.match(r)})),o=o.map(function(e){return new re(e,t)})},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new oe(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new U(e,this.loose));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,n){var i=null,r=null;try{var s=new oe(t,n)}catch(e){return null}return e.forEach(function(e){s.test(e)&&(i&&-1!==r.compare(e)||(r=new U(i=e,n)))}),i},t.minSatisfying=function(e,t,n){var i=null,r=null;try{var s=new oe(t,n)}catch(e){return null}return e.forEach(function(e){s.test(e)&&(i&&1!==r.compare(e)||(r=new U(i=e,n)))}),i},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=J(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new oe(e,n),t=new oe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof U)return e;if("string"!=typeof e)return null;var t=e.match(s[A]);return null==t?null:J((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),s=n(0),o=n(15),a=n(7),c=n(13),l=n(10),u="validate.enable",d="suggestionActions.enabled";class h extends a.Disposable{constructor(e,t,n,i,r,o){super(),this.client=e,this.description=t,this.commandManager=n,this.telemetryReporter=i,this.typingsStatus=r,this.fileConfigurationManager=o,s.workspace.onDidChangeConfiguration(this.configurationChanged,this,this._disposables),this.configurationChanged(),e.onReady(async()=>{await this.registerProviders()})}get documentSelector(){const e=[];for(const t of this.description.modeIds)for(const n of c.supportedSchemes)e.push({language:t,scheme:n});return e}async registerProviders(){const e=this.documentSelector,t=new o.CachedNavTreeResponse;this._register((await Promise.resolve().then(()=>n(38))).register(e,this.description.id,this.client,this.typingsStatus,this.fileConfigurationManager,this.commandManager)),this._register((await Promise.resolve().then(()=>n(39))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(40))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(41))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(42))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(43))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(44))).register(e,this.description.id,this.client,this.fileConfigurationManager)),this._register((await Promise.resolve().then(()=>n(45))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(46))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(47))).register(e,this.description.id,this.client,t)),this._register((await Promise.resolve().then(()=>n(48))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(49))).register(e,this.client,this.commandManager,this.fileConfigurationManager,this.telemetryReporter)),this._register((await Promise.resolve().then(()=>n(50))).register(e,this.client,this.fileConfigurationManager,this.commandManager,this.client.diagnosticsManager,this.telemetryReporter)),this._register((await Promise.resolve().then(()=>n(51))).register(e,this.client,this.fileConfigurationManager,this.commandManager,this.telemetryReporter)),this._register((await Promise.resolve().then(()=>n(52))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(53))).register(e,this.description.id,this.client,t)),this._register((await Promise.resolve().then(()=>n(54))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(55))).register(e,this.client)),this._register((await Promise.resolve().then(()=>n(56))).register(e,this.description.id,this.client)),this._register((await Promise.resolve().then(()=>n(57))).register(e,this.client))}configurationChanged(){const e=s.workspace.getConfiguration(this.id,null);this.updateValidate(e.get(u,!0)),this.updateSuggestionDiagnostics(e.get(d,!0))}handles(e,t){if(t&&this.description.modeIds.indexOf(t.languageId)>=0)return!0;const n=r.basename(e.fsPath);return!!n&&n===this.description.configFile}get id(){return this.description.id}get diagnosticSource(){return this.description.diagnosticSource}updateValidate(e){this.client.diagnosticsManager.setValidate(this._diagnosticLanguage,e)}updateSuggestionDiagnostics(e){this.client.diagnosticsManager.setEnableSuggestions(this._diagnosticLanguage,e)}reInitialize(){this.client.diagnosticsManager.reInitialize()}triggerAllDiagnostics(){this.client.bufferSyncSupport.requestAllDiagnostics()}diagnosticsReceived(e,t,n){const i=s.workspace.getConfiguration(this.id,t).get("showUnused",!0);this.client.diagnosticsManager.updateDiagnostics(t,this._diagnosticLanguage,e,n.filter(e=>!(!i&&(e.tags=void 0,e.reportUnnecessary&&e.severity===s.DiagnosticSeverity.Hint))))}configFileDiagnosticsReceived(e,t){this.client.diagnosticsManager.configFileDiagnosticsReceived(e,t)}get _diagnosticLanguage(){return this.description.diagnosticLanguage}}i([l.memoize],h.prototype,"documentSelector",null),t.default=h},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(3),o=n(11),a=n(2),c=n(9),l=n(21),u=n(5),d=n(10),h=n(16),g=n(1),p=s.loadMessageBundle();class f extends r.CompletionItem{constructor(e,t,n,i,s,o){super(i.name,f.convertKind(i.kind)),this.position=e,this.document=t,this.tsEntry=i,this.commitCharactersSettings=o,i.isRecommended?(this.sortText=i.sortText,this.preselect=!0):i.source?this.sortText="￿"+i.sortText:this.sortText=i.sortText,this.position=e,this.useCodeSnippet=s&&(this.kind===r.CompletionItemKind.Function||this.kind===r.CompletionItemKind.Method),i.replacementSpan&&(this.range=g.Range.fromTextSpan(i.replacementSpan)),i.insertText&&(this.insertText=i.insertText,i.replacementSpan&&(this.range=g.Range.fromTextSpan(i.replacementSpan),"["===this.insertText[0]&&(this.filterText="."+this.label),this.range.isSingleLine||(this.range=new r.Range(this.range.start.line,this.range.start.character,this.range.start.line,n.length)))),i.kindModifiers&&i.kindModifiers.match(/\boptional\b/)&&(this.insertText||(this.insertText=this.label),this.filterText||(this.filterText=this.label),this.label+="?"),this.resolveRange(n)}resolveRange(e){if(this.range)return;const t=this.document.getWordRangeAtPosition(this.position),n=e.slice(Math.max(0,this.position.character-this.label.length),this.position.character).toLowerCase(),i=this.label.toLowerCase();for(let e=i.length;e>=0;--e)if(n.endsWith(i.substr(0,e))&&(!t||t.start.character>this.position.character-e)){this.range=new r.Range(this.position.line,Math.max(0,this.position.character-e),this.position.line,this.position.character);break}}static convertKind(e){switch(e){case o.Kind.primitiveType:case o.Kind.keyword:return r.CompletionItemKind.Keyword;case o.Kind.const:return r.CompletionItemKind.Constant;case o.Kind.let:case o.Kind.variable:case o.Kind.localVariable:case o.Kind.alias:return r.CompletionItemKind.Variable;case o.Kind.memberVariable:case o.Kind.memberGetAccessor:case o.Kind.memberSetAccessor:return r.CompletionItemKind.Field;case o.Kind.function:return r.CompletionItemKind.Function;case o.Kind.memberFunction:case o.Kind.constructSignature:case o.Kind.callSignature:case o.Kind.indexSignature:return r.CompletionItemKind.Method;case o.Kind.enum:return r.CompletionItemKind.Enum;case o.Kind.module:case o.Kind.externalModuleName:return r.CompletionItemKind.Module;case o.Kind.class:case o.Kind.type:return r.CompletionItemKind.Class;case o.Kind.interface:return r.CompletionItemKind.Interface;case o.Kind.warning:case o.Kind.script:return r.CompletionItemKind.File;case o.Kind.directory:return r.CompletionItemKind.Folder;case o.Kind.string:return r.CompletionItemKind.Constant}return r.CompletionItemKind.Property}get commitCharacters(){if(this.commitCharactersSettings.isNewIdentifierLocation||!this.commitCharactersSettings.isInValidCommitCharacterContext)return;const e=[];switch(this.tsEntry.kind){case o.Kind.memberGetAccessor:case o.Kind.memberSetAccessor:case o.Kind.constructSignature:case o.Kind.callSignature:case o.Kind.indexSignature:case o.Kind.enum:case o.Kind.interface:e.push(".",";");break;case o.Kind.module:case o.Kind.alias:case o.Kind.const:case o.Kind.let:case o.Kind.variable:case o.Kind.localVariable:case o.Kind.memberVariable:case o.Kind.class:case o.Kind.function:case o.Kind.memberFunction:case o.Kind.keyword:case o.Kind.parameter:e.push(".",",",";"),this.commitCharactersSettings.enableCallCompletions&&e.push("(")}return 0===e.length?void 0:e}}i([d.memoize],f.prototype,"commitCharacters",null);class m{constructor(e){this.client=e,this.id=m.ID}async execute(e,t){if(0===t.length)return!0;if(1===t.length)return l.applyCodeAction(this.client,t[0],c.nulToken);const n=await r.window.showQuickPick(t.map((e,t)=>({label:e.description,description:"",index:t})),{placeHolder:p("selectCodeAction","Select code action to apply")});if(!n)return!1;const i=t[n.index];return!!i&&l.applyCodeAction(this.client,i,c.nulToken)}}var v;m.ID="_typescript.applyCompletionCodeAction",function(e){e.useCodeSnippetsOnMethodSuggest="suggest.completeFunctionCalls",e.nameSuggestions="suggest.names",e.pathSuggestions="suggest.paths",e.autoImportSuggestions="suggest.autoImports",e.getConfigurationForResource=function(t,n){const i=r.workspace.getConfiguration(t,n);return{useCodeSnippetsOnMethodSuggest:i.get(e.useCodeSnippetsOnMethodSuggest,!1),pathSuggestions:i.get(e.pathSuggestions,!0),autoImportSuggestions:i.get(e.autoImportSuggestions,!0),nameSuggestions:i.get(e.nameSuggestions,!0)}}}(v||(v={}));class y{constructor(e,t,n,i,r){this.client=e,this.modeId=t,this.typingsStatus=n,this.fileConfigurationManager=i,r.register(new m(this.client))}async provideCompletionItems(e,t,n,i){if(this.typingsStatus.isAcquiringTypings)return Promise.reject({label:p({key:"acquiringTypingsLabel",comment:["Typings refers to the *.d.ts typings files that power our IntelliSense. It should not be localized"]},"Acquiring typings..."),detail:p({key:"acquiringTypingsDetail",comment:["Typings refers to the *.d.ts typings files that power our IntelliSense. It should not be localized"]},"Acquiring typings definitions for IntelliSense.")});const r=this.client.toPath(e.uri);if(!r)return null;const s=e.lineAt(t.line),c=v.getConfigurationForResource(this.modeId,e.uri);if(!this.shouldTrigger(i,s,t))return null;await this.client.interuptGetErr(()=>this.fileConfigurationManager.ensureConfigurationForDocument(e,n));const l=Object.assign({},g.Position.toFileLocationRequestArgs(r,t),{includeExternalModuleExports:c.autoImportSuggestions,includeInsertTextCompletions:!0,triggerCharacter:this.getTsTriggerCharacter(i)});let u=!0,d=void 0;if(this.client.apiVersion.gte(a.default.v300)){const e=await this.client.interuptGetErr(()=>this.client.execute("completionInfo",l,n));if("response"!==e.type||!e.body)return null;u=e.body.isNewIdentifierLocation,d=e.body.entries}else{const e=await this.client.interuptGetErr(()=>this.client.execute("completions",l,n));if("response"!==e.type||!e.body)return null;d=e.body}const h=this.isInValidCommitCharacterContext(e,t);return d.filter(e=>!function(e,t){return!t.nameSuggestions&&e.kind===o.Kind.warning||!t.pathSuggestions&&(e.kind===o.Kind.directory||e.kind===o.Kind.script||e.kind===o.Kind.externalModuleName)||!t.autoImportSuggestions&&e.hasAction}(e,c)).map(n=>new f(t,e,s.text,n,c.useCodeSnippetsOnMethodSuggest,{isNewIdentifierLocation:u,isInValidCommitCharacterContext:h,enableCallCompletions:!c.useCodeSnippetsOnMethodSuggest}))}getTsTriggerCharacter(e){if("@"!==e.triggerCharacter||!this.client.apiVersion.gte(a.default.v310)||!this.client.apiVersion.lt(a.default.v320))return e.triggerCharacter}async resolveCompletionItem(e,t){if(!(e instanceof f))return;const n=this.client.toPath(e.document.uri);if(!n)return;const i=Object.assign({},g.Position.toFileLocationRequestArgs(n,e.position),{entryNames:[e.tsEntry.source?{name:e.tsEntry.name,source:e.tsEntry.source}:e.tsEntry.name]});let r;const s=await this.client.execute("completionEntryDetails",i,t);if("response"!==s.type)return e;const{body:o}=s;if(!(r=o)||!r.length||!r[0])return e;const a=r[0];e.detail=a.displayParts.length?h.plain(a.displayParts):void 0,e.documentation=this.getDocumentation(a,e);const{command:c,additionalTextEdits:l}=this.getCodeActions(a,n);if(e.command=c,e.additionalTextEdits=l,a&&e.useCodeSnippet){await this.isValidFunctionCompletionContext(n,e.position,t)&&(e.insertText=this.snippetForFunctionCall(e,a),e.command={title:"triggerParameterHints",command:"editor.action.triggerParameterHints"})}return e}getCodeActions(e,t){if(!e.codeActions||!e.codeActions.length)return{};const n=[];let i=!1;for(const r of e.codeActions)if(r.commands&&(i=!0),r.changes)for(const e of r.changes)e.fileName===t?n.push(...e.textChanges.map(g.TextEdit.fromCodeEdit)):i=!0;let r=void 0;return i&&(r={title:"",command:m.ID,arguments:[t,e.codeActions.map(e=>({commands:e.commands,description:e.description,changes:e.changes.filter(e=>e.fileName!==t)}))]}),{command:r,additionalTextEdits:n.length?n:void 0}}isInValidCommitCharacterContext(e,t){if(this.client.apiVersion.lt(a.default.v320)&&t.character>1){return null===e.getText(new r.Range(t.line,0,t.line,t.character)).match(/(\s|^)\.$/gi)}return!0}shouldTrigger(e,t,n){if(e.triggerCharacter&&this.client.apiVersion.lt(a.default.v290)){if('"'===e.triggerCharacter||"'"===e.triggerCharacter){const e=t.text.slice(0,n.character);if(!e.match(/\b(from|import)\s*["']$/)&&!e.match(/\b(import|require)\(['"]$/))return!1}if("/"===e.triggerCharacter){const e=t.text.slice(0,n.character);if(!e.match(/\b(from|import)\s*["'][^'"]*$/)&&!e.match(/\b(import|require)\(['"][^'"]*$/))return!1}if("@"===e.triggerCharacter){const e=t.text.slice(0,n.character);if(!e.match(/^\s*\*[ ]?@/)&&!e.match(/\/\*\*+[ ]?@/))return!1}if("<"===e.triggerCharacter)return!1}return!0}getDocumentation(e,t){const n=new r.MarkdownString;if(e.source){const n=`'${h.plain(e.source)}'`,i=p("autoImportLabel","Auto import from {0}",n);t.detail=`${i}\n${t.detail}`}return h.addMarkdownDocumentation(n,e.documentation,e.tags),n.value.length?n:void 0}async isValidFunctionCompletionContext(e,t,n){try{const i=g.Position.toFileLocationRequestArgs(e,t),r=await this.client.execute("quickinfo",i,n);if("response"!==r.type)return!0;const{body:s}=r;switch(s&&s.kind){case"var":case"let":case"const":case"alias":return!1;default:return!0}}catch(e){return!0}}snippetForFunctionCall(e,t){let n=!1,i=!1;const s=new r.SnippetString,o=t.displayParts.find(e=>"methodName"===e.kind);if(e.insertText){if("string"!=typeof e.insertText)return e.insertText;s.appendText(e.insertText)}else s.appendText(o&&o.text||e.label);s.appendText("(");let a=0,c=0;for(;c<t.displayParts.length;++c){const e=t.displayParts[c];if("parameterName"===e.kind&&1===a){const r=t.displayParts[c+1],o=r&&"?"===r.text;o||(i&&s.appendText(", "),i=!0,s.appendPlaceholder(e.text)),n=n||o}else if("punctuation"===e.kind)if("("===e.text)++a;else if(")"===e.text)--a;else if("..."===e.text&&1===a){n=!0;break}}return n&&s.appendTabstop(),s.appendText(")"),s.appendTabstop(0),s}}y.triggerCharacters=[".",'"',"'","/","@","<"],t.register=function(e,t,n,i,s,o){return new u.ConfigurationDependentRegistration(t,"suggest.enabled",()=>r.languages.registerCompletionItemProvider(e,new y(n,t,i,s,o),...y.triggerCharacters))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(1),o=n(17);class a extends o.default{constructor(e){super(e)}async provideDefinition(e,t,n){if(this.client.apiVersion.gte(r.default.v270)){const i=this.client.toPath(e.uri);if(!i)return;const r=s.Position.toFileLocationRequestArgs(i,t),o=await this.client.execute("definitionAndBoundSpan",r,n);if("response"!==o.type||!o.body)return;const a=o.body.textSpan?s.Range.fromTextSpan(o.body.textSpan):void 0;return o.body.definitions.map(e=>{const t=s.Location.fromTextSpan(this.client.toResource(e.file),e);return{originSelectionRange:a,targetRange:t.range,targetUri:t.uri}})}return this.getSymbolLocations("definition",e,t,n)}}t.default=a,t.register=function(e,t){return i.languages.registerDefinitionProvider(e,new a(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(2),o=n(5),a=r.loadMessageBundle(),c=[{value:"@ts-check",description:a("ts-check","Enables semantic checking in a JavaScript file. Must be at the top of a file.")},{value:"@ts-nocheck",description:a("ts-nocheck","Disables semantic checking in a JavaScript file. Must be at the top of a file.")},{value:"@ts-ignore",description:a("ts-ignore","Suppresses @ts-check errors on the next line of a file.")}];class l{constructor(e){this.client=e}provideCompletionItems(e,t,n){if(!this.client.toPath(e.uri))return[];const r=e.lineAt(t.line).text.slice(0,t.character).match(/^\s*\/\/+\s?(@[a-zA-Z\-]*)?$/);return r?c.map(e=>{const n=new i.CompletionItem(e.value,i.CompletionItemKind.Snippet);return n.detail=e.description,n.range=new i.Range(t.line,Math.max(0,t.character-(r[1]?r[1].length:0)),t.line,t.character),n}):[]}}t.register=function(e,t){return new o.VersionDependentRegistration(t,s.default.v230,()=>i.languages.registerCompletionItemProvider(e,new l(t),"@"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(1);class s{constructor(e){this.client=e}async provideDocumentHighlights(e,t,n){const i=this.client.toPath(e.uri);if(!i)return[];const s=r.Position.toFileLocationRequestArgs(i,t),a=await this.client.execute("occurrences",s,n);return"response"===a.type&&a.body?a.body.filter(e=>!e.isInString).map(o):[]}}function o(e){return new i.DocumentHighlight(r.Range.fromTextSpan(e),e.isWriteAccess?i.DocumentHighlightKind.Write:i.DocumentHighlightKind.Read)}t.register=function(e,t){return i.languages.registerDocumentHighlightProvider(e,new s(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(11),s=n(1),o=e=>{switch(e){case r.Kind.module:return i.SymbolKind.Module;case r.Kind.class:return i.SymbolKind.Class;case r.Kind.enum:return i.SymbolKind.Enum;case r.Kind.interface:return i.SymbolKind.Interface;case r.Kind.memberFunction:return i.SymbolKind.Method;case r.Kind.memberVariable:case r.Kind.memberGetAccessor:case r.Kind.memberSetAccessor:return i.SymbolKind.Property;case r.Kind.variable:case r.Kind.const:case r.Kind.localVariable:return i.SymbolKind.Variable;case r.Kind.function:case r.Kind.localFunction:return i.SymbolKind.Function}return i.SymbolKind.Variable};class a{constructor(e){this.client=e}async provideDocumentSymbols(e,t){const n=this.client.toPath(e.uri);if(!n)return;const i={file:n},r=await this.client.execute("navtree",i,t);if("response"!==r.type||!r.body)return;let s=r.body;if(s&&s.childItems){const t=[];return s.childItems.forEach(n=>a.convertNavTree(e.uri,t,n)),t}}static convertNavTree(e,t,n){let r=a.shouldInclueEntry(n);const c=new Set(n.childItems||[]);for(const l of n.spans){const u=s.Range.fromTextSpan(l),d=new i.DocumentSymbol(n.text,"",o(n.kind),u,u);for(const t of c)if(t.spans.some(e=>!!u.intersection(s.Range.fromTextSpan(e)))){const n=a.convertNavTree(e,d.children,t);r=r||n,c.delete(t)}r&&t.push(d)}return r}static shouldInclueEntry(e){return e.kind!==r.Kind.alias&&!(!e.text||"<function>"===e.text||"<class>"===e.text)}}t.register=function(e,t){return i.languages.registerDocumentSymbolProvider(e,new a(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(5),o=n(1);class a{constructor(e){this.client=e}async provideFoldingRanges(e,t,n){const i=this.client.toPath(e.uri);if(!i)return;const r={file:i},s=await this.client.execute("getOutliningSpans",r,n);return"response"===s.type&&s.body?s.body.map(t=>this.convertOutliningSpan(t,e)).filter(e=>!!e):void 0}convertOutliningSpan(e,t){const n=o.Range.fromTextSpan(e.textSpan),r=a.getFoldingRangeKind(e);if("comment"===e.kind){if(t.lineAt(n.start.line).text.match(/\/\/\s*#endregion/gi))return}const s=n.start.line,c=n.end.character>0&&"}"===t.getText(new i.Range(n.end.translate(0,-1),n.end))?Math.max(n.end.line-1,n.start.line):n.end.line;return new i.FoldingRange(s,c,r)}static getFoldingRangeKind(e){switch(e.kind){case"comment":return i.FoldingRangeKind.Comment;case"region":return i.FoldingRangeKind.Region;case"imports":return i.FoldingRangeKind.Imports;case"code":default:return}}}t.register=function(e,t){return new s.VersionDependentRegistration(t,r.default.v280,()=>i.languages.registerFoldingRangeProvider(e,new a(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(5),s=n(1);class o{constructor(e,t){this.client=e,this.formattingOptionsManager=t}async provideDocumentRangeFormattingEdits(e,t,n,i){const r=this.client.toPath(e.uri);if(!r)return;await this.formattingOptionsManager.ensureConfigurationOptions(e,n,i);const o=s.Range.toFormattingRequestArgs(r,t),a=await this.client.execute("format",o,i);return"response"===a.type&&a.body?a.body.map(s.TextEdit.fromCodeEdit):void 0}async provideOnTypeFormattingEdits(e,t,n,i,r){const o=this.client.toPath(e.uri);if(!o)return[];await this.formattingOptionsManager.ensureConfigurationOptions(e,i,r);const a=Object.assign({},s.Position.toFileLocationRequestArgs(o,t),{key:n}),c=await this.client.execute("formatonkey",a,r);if("response"!==c.type||!c.body)return[];const l=c.body,u=[];if(!l)return u;for(const t of l){const n=s.TextEdit.fromCodeEdit(t),i=n.range;if(0===i.start.character&&i.start.line===i.end.line&&""===n.newText){const t=e.lineAt(i.start.line).text;(t.trim().length>0||t.length>i.end.character)&&u.push(n)}else u.push(n)}return u}}t.register=function(e,t,n,s){return new r.ConfigurationDependentRegistration(t,"format.enable",()=>{const t=new o(n,s);return i.Disposable.from(i.languages.registerOnTypeFormattingEditProvider(e,t,";","}","\n"),i.languages.registerDocumentRangeFormattingEditProvider(e,t))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(16),s=n(1);class o{constructor(e){this.client=e}async provideHover(e,t,n){const r=this.client.toPath(e.uri);if(!r)return;const a=s.Position.toFileLocationRequestArgs(r,t),c=await this.client.interuptGetErr(()=>this.client.execute("quickinfo",a,n));return"response"===c.type&&c.body?new i.Hover(o.getContents(c.body),s.Range.fromTextSpan(c.body)):void 0}static getContents(e){const t=[];e.displayString&&t.push({language:"typescript",value:e.displayString});const n=r.tagsMarkdownPreview(e.tags);return t.push(e.documentation+(n?"\n\n"+n:"")),t}}t.register=function(e,t){return i.languages.registerHoverProvider(e,new o(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(5),o=n(17);class a extends o.default{provideImplementation(e,t,n){return this.getSymbolLocations("implementation",e,t,n)}}t.register=function(e,t){return new s.VersionDependentRegistration(t,r.default.v220,()=>i.languages.registerImplementationProvider(e,new a(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(11),o=n(2),a=n(5),c=n(15),l=r.loadMessageBundle();class u extends c.TypeScriptBaseCodeLensProvider{async resolveCodeLens(e,t){const n=e;try{const e=await i.commands.executeCommand("vscode.executeImplementationProvider",n.document,n.range.start);if(e)return n.command=this.getCommand(e,n),n}catch(e){}return n.command={title:l("implementationsErrorLabel","Could not determine implementations"),command:""},n}getCommand(e,t){return{title:this.getTitle(e),command:e.length?"editor.action.showReferences":"",arguments:[t.document,t.range.start,e]}}getTitle(e){return 1===e.length?l("oneImplementationLabel","1 implementation"):l("manyImplementationLabel","{0} implementations",e.length)}extractSymbol(e,t,n){switch(t.kind){case s.Kind.interface:return super.getSymbolRange(e,t);case s.Kind.class:case s.Kind.memberFunction:case s.Kind.memberVariable:case s.Kind.memberGetAccessor:case s.Kind.memberSetAccessor:if(t.kindModifiers.match(/\babstract\b/g))return super.getSymbolRange(e,t)}return null}}t.default=u,t.register=function(e,t,n,r){return new a.VersionDependentRegistration(n,o.default.v220,()=>new a.ConfigurationDependentRegistration(t,"implementationsCodeLens.enabled",()=>i.languages.registerCodeLensProvider(e,new u(n,r))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(5),o=n(1),a=r.loadMessageBundle(),c=new i.SnippetString("/**\n * $0\n */");class l extends i.CompletionItem{constructor(e,t){super("/** */",i.CompletionItemKind.Snippet),this.document=e,this.position=t,this.detail=a("typescript.jsDocCompletionItem.documentation","JSDoc comment"),this.sortText="\0";const n=e.lineAt(t.line).text,r=n.slice(0,t.character).match(/\/\**\s*$/),s=n.slice(t.character).match(/^\s*\**\//),o=t.translate(0,r?-r[0].length:0);this.range=new i.Range(o,t.translate(0,s?s[0].length:0))}}class u{constructor(e){this.client=e}async provideCompletionItems(e,t,n){const i=this.client.toPath(e.uri);if(!i)return;if(!this.isPotentiallyValidDocCompletionPosition(e,t))return;const r=o.Position.toFileLocationRequestArgs(i,t),s=await this.client.execute("docCommentTemplate",r,n);if("response"!==s.type||!s.body)return;const a=new l(e,t);return"/** */"===s.body.newText?a.insertText=c:a.insertText=d(s.body.newText),[a]}isPotentiallyValidDocCompletionPosition(e,t){const n=e.lineAt(t.line).text;return null!==n.slice(0,t.character).match(/^\s*$|\/\*\*\s*$|^\s*\/\*\*+\s*$/)&&null!==n.slice(t.character).match(/^\s*\*+\//)}}function d(e){let t=1;return e=(e=(e=(e=e.replace(/\$/g,"\\$")).replace(/^\s*(?=(\/|[ ]\*))/gm,"")).replace(/^(\/\*\*\s*\*[ ]*)$/m,e=>e+"$0")).replace(/\* @param([ ]\{\S+\})?\s+(\S+)\s*$/gm,(e,n,i)=>{let r="* @param ";return" {any}"===n||" {*}"===n?r+=`{\${${t++}:*}} `:n&&(r+=n+" "),r+=i+` \${${t++}}`}),new i.SnippetString(e)}t.templateToSnippet=d,t.register=function(e,t){return new s.ConfigurationDependentRegistration("jsDocCompletion","enabled",()=>i.languages.registerCompletionItemProvider(e,new u(t),"*"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(2),o=n(5),a=n(1),c=n(9),l=r.loadMessageBundle();class u{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=u.Id}async execute(e){this.telemetryReporter.logTelemetry("organizeImports.execute",{});const t={scope:{type:"file",args:{file:e}}},n=await this.client.execute("organizeImports",t,c.nulToken);if("response"!==n.type||!n.body)return!1;const r=a.WorkspaceEdit.fromFileCodeEdits(this.client,n.body);return i.workspace.applyEdit(r)}}u.Id="_typescript.organizeImports";class d{constructor(e,t,n,r){this.client=e,this.fileConfigManager=n,this.metadata={providedCodeActionKinds:[i.CodeActionKind.SourceOrganizeImports]},t.register(new u(e,r))}provideCodeActions(e,t,n,r){const s=this.client.toPath(e.uri);if(!s)return[];if(!n.only||!n.only.contains(i.CodeActionKind.SourceOrganizeImports))return[];this.fileConfigManager.ensureConfigurationForDocument(e,r);const o=new i.CodeAction(l("oraganizeImportsAction.title","Organize Imports"),i.CodeActionKind.SourceOrganizeImports);return o.command={title:"",command:u.Id,arguments:[s]},[o]}}t.OrganizeImportsCodeActionProvider=d,t.register=function(e,t,n,r,a){return new o.VersionDependentRegistration(t,s.default.v280,()=>{const s=new d(t,n,r,a);return i.languages.registerCodeActionsProvider(e,s,s.metadata)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(2),o=n(21),a=n(5),c=n(1),l=n(9),u=r.loadMessageBundle();class d{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=d.ID}async execute(e){return this.telemetryReporter.logTelemetry("quickFix.execute",{fixName:e.fixName}),o.applyCodeActionCommands(this.client,e.commands,l.nulToken)}}d.ID="_typescript.applyCodeActionCommand";class h{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=h.ID}async execute(e,t){if(!t.fixId)return;this.telemetryReporter.logTelemetry("quickFixAll.execute",{fixName:t.fixName});const n={scope:{type:"file",args:{file:e}},fixId:t.fixId},r=await this.client.execute("getCombinedCodeFix",n,l.nulToken);if("response"!==r.type||!r.body)return;const s=c.WorkspaceEdit.fromFileCodeEdits(this.client,r.body.changes);await i.workspace.applyEdit(s),await o.applyCodeActionCommands(this.client,r.body.commands,l.nulToken)}}h.ID="_typescript.applyFixAllCodeAction";class g{constructor(e){this._values=e}static from(e){const t=new Map;for(const n of e)t.set(g.key(n),n);return new g(t)}static key(e){const{start:t,end:n}=e.range;return`${e.code}-${t.line},${t.character}-${n.line},${n.character}`}get values(){return this._values.values()}get size(){return this._values.size}}class p{constructor(){this._actions=new Set,this._fixAllActions=new Map}get values(){return this._actions}addAction(e){this._actions.add(e)}addFixAllAction(e,t){const n=this._fixAllActions.get(e);n&&this._actions.delete(n),this.addAction(t),this._fixAllActions.set(e,t)}hasFixAllAction(e){return this._fixAllActions.has(e)}}class f{constructor(e){this.client=e}async getFixableDiagnosticsForContext(e){const t=await this.supportedCodeActions;return g.from(e.diagnostics.filter(e=>t.has(+e.code)))}get supportedCodeActions(){return this._supportedCodeActions||(this._supportedCodeActions=this.client.execute("getSupportedCodeFixes",null,l.nulToken).then(e=>"response"===e.type&&e.body||[]).then(e=>e.map(e=>+e).filter(e=>!isNaN(e))).then(e=>new Set(e))),this._supportedCodeActions}}class m{constructor(e,t,n,i,r){this.client=e,this.formattingConfigurationManager=t,this.diagnosticsManager=i,n.register(new d(e,r)),n.register(new h(e,r)),this.supportedCodeActionProvider=new f(e)}async provideCodeActions(e,t,n,i){const r=this.client.toPath(e.uri);if(!r)return[];const s=await this.supportedCodeActionProvider.getFixableDiagnosticsForContext(n);if(!s.size)return[];if(this.client.bufferSyncSupport.hasPendingDiagnostics(e.uri))return[];await this.formattingConfigurationManager.ensureConfigurationForDocument(e,i);const o=[];for(const t of s.values)o.push(...await this.getFixesForDiagnostic(e,r,t,i));return o}async getFixesForDiagnostic(e,t,n,i){const r=Object.assign({},c.Range.toFileRangeRequestArgs(t,n.range),{errorCodes:[+n.code]}),s=await this.client.execute("getCodeFixes",r,i);if("response"!==s.type||!s.body)return[];const o=new p;for(const i of s.body)this.addAllFixesForTsCodeAction(o,e,t,n,i);return o.values}addAllFixesForTsCodeAction(e,t,n,i,r){return e.addAction(this.getSingleFixForTsCodeAction(i,r)),this.addFixAllForTsCodeAction(e,t,n,i,r),e}getSingleFixForTsCodeAction(e,t){const n=new i.CodeAction(t.description,i.CodeActionKind.QuickFix);return n.edit=o.getEditForCodeAction(this.client,t),n.diagnostics=[e],n.command={command:d.ID,arguments:[t],title:""},n}addFixAllForTsCodeAction(e,t,n,r,o){if(!o.fixId||this.client.apiVersion.lt(s.default.v270)||e.hasFixAllAction(e))return e;if(!this.diagnosticsManager.getDiagnostics(t.uri).some(e=>e.code===r.code&&e!==r))return e;const a=new i.CodeAction(o.fixAllDescription||u("fixAllInFileLabel","{0} (Fix all in file)",o.description),i.CodeActionKind.QuickFix);return a.diagnostics=[r],a.command={command:h.ID,arguments:[n,o],title:""},e.addFixAllAction(o.fixId,a),e}}m.metadata={providedCodeActionKinds:[i.CodeActionKind.QuickFix]},t.register=function(e,t,n,r,o,c){return new a.VersionDependentRegistration(t,s.default.v213,()=>i.languages.registerCodeActionsProvider(e,new m(t,n,r,o,c),m.metadata))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(5),o=n(1),a=n(9);class c{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=c.ID}async execute(e,t,n,r,s){this.telemetryReporter.logTelemetry("refactor.execute",{action:r});const c=Object.assign({},o.Range.toFileRangeRequestArgs(t,s),{refactor:n,action:r}),l=await this.client.execute("getEditsForRefactor",c,a.nulToken);if("response"!==l.type||!l.body||!l.body.edits.length)return!1;const u=await this.toWorkspaceEdit(l.body);if(!await i.workspace.applyEdit(u))return!1;const d=l.body.renameLocation;return d&&await i.commands.executeCommand("editor.action.rename",[e.uri,o.Position.fromLocation(d)]),!0}async toWorkspaceEdit(e){const t=new i.WorkspaceEdit;for(const n of e.edits)t.createFile(this.client.toResource(n.fileName),{ignoreIfExists:!0});return o.WorkspaceEdit.withFileCodeEdits(t,this.client,e.edits),t}}c.ID="_typescript.applyRefactoring";class l{constructor(e){this.doRefactoring=e,this.id=l.ID}async execute(e,t,n,r){const s=await i.window.showQuickPick(n.actions.map(e=>({label:e.name,description:e.description})));return!!s&&this.doRefactoring.execute(e,t,n.name,s.label,r)}}l.ID="_typescript.selectRefactoring";class u{constructor(e,t,n,i){this.client=e,this.formattingOptionsManager=t;const r=n.register(new c(this.client,i));n.register(new l(r))}async provideCodeActions(e,t,n,i){if(!this.shouldTrigger(t,n))return;const r=this.client.toPath(e.uri);if(!r)return;await this.formattingOptionsManager.ensureConfigurationForDocument(e,i);const s=o.Range.toFileRangeRequestArgs(r,t),a=await this.client.execute("getApplicableRefactors",s,i);return"response"===a.type&&a.body?this.convertApplicableRefactors(a.body,e,r,t):void 0}convertApplicableRefactors(e,t,n,r){const s=[];for(const o of e)if(!1===o.inlineable){const e=new i.CodeAction(o.description,i.CodeActionKind.Refactor);e.command={title:o.description,command:l.ID,arguments:[t,n,o,r]},s.push(e)}else for(const e of o.actions)s.push(this.refactorActionToCodeAction(e,t,n,o,r));return s}refactorActionToCodeAction(e,t,n,r,s){const o=new i.CodeAction(e.description,u.getKind(e));return o.command={title:e.description,command:c.ID,arguments:[t,n,r.name,e.name,s]},o}shouldTrigger(e,t){return!(t.only&&!i.CodeActionKind.Refactor.contains(t.only))&&e instanceof i.Selection}static getKind(e){return e.name.startsWith("function_")?u.extractFunctionKind:e.name.startsWith("constant_")?u.extractConstantKind:e.name.startsWith("Move")?u.moveKind:i.CodeActionKind.Refactor}}u.extractFunctionKind=i.CodeActionKind.RefactorExtract.append("function"),u.extractConstantKind=i.CodeActionKind.RefactorExtract.append("constant"),u.moveKind=i.CodeActionKind.Refactor.append("move"),u.metadata={providedCodeActionKinds:[i.CodeActionKind.Refactor]},t.register=function(e,t,n,o,a){return new s.VersionDependentRegistration(t,r.default.v240,()=>i.languages.registerCodeActionsProvider(e,new u(t,n,o,a),u.metadata))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(1);class o{constructor(e){this.client=e}async provideReferences(e,t,n,i){const o=this.client.toPath(e.uri);if(!o)return[];const a=s.Position.toFileLocationRequestArgs(o,t),c=await this.client.execute("references",a,i);if("response"!==c.type||!c.body)return[];const l=[],u=this.client.apiVersion.gte(r.default.v203);for(const e of c.body.refs){if(!n.includeDeclaration&&u&&e.isDefinition)continue;const t=this.client.toResource(e.file),i=s.Location.fromTextSpan(t,e);l.push(i)}return l}}t.register=function(e,t){return i.languages.registerReferenceProvider(e,new o(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(11),o=n(2),a=n(5),c=n(15),l=r.loadMessageBundle();class u extends c.TypeScriptBaseCodeLensProvider{resolveCodeLens(e,t){const n=e;return i.commands.executeCommand("vscode.executeReferenceProvider",n.document,n.range.start).then(e=>{if(!e)throw n;const t=e.filter(e=>!(e.uri.toString()===n.document.toString()&&e.range.start.isEqual(n.range.start)));return n.command={title:1===t.length?l("oneReferenceLabel","1 reference"):l("manyReferenceLabel","{0} references",t.length),command:t.length?"editor.action.showReferences":"",arguments:[n.document,n.range.start,t]},n}).then(void 0,()=>(n.command={title:l("referenceErrorLabel","Could not determine references"),command:""},n))}extractSymbol(e,t,n){if(n&&n.kind===s.Kind.enum)return super.getSymbolRange(e,t);switch(t.kind){case s.Kind.const:case s.Kind.let:case s.Kind.variable:case s.Kind.function:if(!t.kindModifiers.match(/\bexport\b/))break;case s.Kind.class:if("<class>"===t.text)break;case s.Kind.memberFunction:case s.Kind.memberVariable:case s.Kind.memberGetAccessor:case s.Kind.memberSetAccessor:case s.Kind.constructorImplementation:case s.Kind.interface:case s.Kind.type:case s.Kind.enum:return super.getSymbolRange(e,t)}return null}}t.register=function(e,t,n,r){return new a.VersionDependentRegistration(n,o.default.v206,()=>new a.ConfigurationDependentRegistration(t,"referencesCodeLens.enabled",()=>i.languages.registerCodeLensProvider(e,new u(n,r))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0),s=n(3),o=n(2),a=n(1),c=s.loadMessageBundle();class l{constructor(e){this.client=e}async prepareRename(e,t,n){const i=await this.execRename(e,t,n);if(!i||"response"!==i.type||!i.body)return null;const r=i.body.info;if(!r.canRename)return Promise.reject(r.localizedErrorMessage);if(this.client.apiVersion.gte(o.default.v310)){const e=r.triggerSpan;if(e){return a.Range.fromTextSpan(e)}}return null}async provideRenameEdits(e,t,n,i){const r=await this.execRename(e,t,i);if(!r||"response"!==r.type||!r.body)return null;const s=r.body.info;if(!s.canRename)return Promise.reject(s.localizedErrorMessage);if(this.client.apiVersion.gte(o.default.v310)&&s.fileToRename){const e=await this.renameFile(s.fileToRename,n,i);return e||Promise.reject(c("fileRenameFail","An error occurred while renaming file"))}return this.updateLocs(r.body.locs,n)}async execRename(e,t,n){const i=this.client.toPath(e.uri);if(!i)return;const r=Object.assign({},a.Position.toFileLocationRequestArgs(i,t),{findInStrings:!1,findInComments:!1});return this.client.execute("rename",r,n)}updateLocs(e,t){const n=new r.WorkspaceEdit;for(const i of e){const e=this.client.toResource(i.file);if(e)for(const r of i.locs)n.replace(e,a.Range.fromTextSpan(r),(r.prefixText||"")+t+(r.suffixText||""))}return n}async renameFile(e,t,n){i.extname(t)||(t+=i.extname(e));const s=i.dirname(e),o=i.join(s,t),c={file:e,oldFilePath:e,newFilePath:o},l=await this.client.execute("getEditsForFileRename",c,n);if("response"!==l.type||!l.body)return;const u=a.WorkspaceEdit.fromFileCodeEdits(this.client,l.body);return u.renameFile(r.Uri.file(e),r.Uri.file(o)),u}}t.register=function(e,t){return r.languages.registerRenameProvider(e,new l(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(16),s=n(1);class o{constructor(e){this.client=e}async provideSignatureHelp(e,t,n,r){const o=this.client.toPath(e.uri);if(!o)return;const a=Object.assign({},s.Position.toFileLocationRequestArgs(o,t),{triggerReason:function(e){switch(e.triggerReason){case i.SignatureHelpTriggerReason.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:"retrigger",triggerCharacter:e.triggerCharacter}:{kind:"characterTyped",triggerCharacter:e.triggerCharacter}:{kind:"invoked"};case i.SignatureHelpTriggerReason.ContentChange:return e.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case i.SignatureHelpTriggerReason.Invoke:default:return{kind:"invoked"}}}(r)}),c=await this.client.execute("signatureHelp",a,n);if("response"!==c.type||!c.body)return;const l=c.body,u=new i.SignatureHelp;return u.activeSignature=l.selectedItemIndex,u.activeParameter=this.getActiveParmeter(l),u.signatures=l.items.map(e=>this.convertSignature(e)),u}getActiveParmeter(e){const t=e.items[e.selectedItemIndex];return t&&t.isVariadic?Math.min(e.argumentIndex,t.parameters.length-1):e.argumentIndex}convertSignature(e){const t=new i.SignatureInformation(r.plain(e.prefixDisplayParts),r.markdownDocumentation(e.documentation,e.tags.filter(e=>"param"!==e.name)));return t.parameters=e.parameters.map(e=>new i.ParameterInformation(r.plain(e.displayParts),r.markdownDocumentation(e.documentation,[]))),t.label+=t.parameters.map(e=>e.label).join(r.plain(e.separatorDisplayParts)),t.label+=r.plain(e.suffixDisplayParts),t}}o.triggerCharacters=["(",",","<"],o.retriggerCharacters=[")"],t.register=function(e,t){return i.languages.registerSignatureHelpProvider(e,new o(t),{triggerCharacters:o.triggerCharacters,retriggerCharacters:o.retriggerCharacters})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(5),o=n(7),a=n(1);class c extends o.Disposable{constructor(e){super(),this.client=e,this._disposed=!1,this._timeout=void 0,this._cancel=void 0,i.workspace.onDidChangeTextDocument(e=>this.onDidChangeTextDocument(e.document,e.contentChanges),null,this._disposables)}dispose(){super.dispose(),this._disposed=!0,this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._cancel&&(this._cancel.cancel(),this._cancel.dispose(),this._cancel=void 0)}onDidChangeTextDocument(e,t){const n=i.window.activeTextEditor&&i.window.activeTextEditor.document;if(e!==n||0===t.length)return;const r=this.client.toPath(e.uri);if(!r)return;void 0!==this._timeout&&clearTimeout(this._timeout),this._cancel&&(this._cancel.cancel(),this._cancel.dispose(),this._cancel=void 0);const s=t[t.length-1],o=s.text[s.text.length-1];if(s.rangeLength>0||">"!==o&&"/"!==o)return;if(">"===(s.range.start.character>0?e.getText(new i.Range(s.range.start.translate({characterDelta:-1}),s.range.start)):""))return;const c=s.range.start,l=e.version;this._timeout=setTimeout(async()=>{if(this._timeout=void 0,this._disposed)return;let t=new i.Position(c.line,c.character+s.text.length);const n=a.Position.toFileLocationRequestArgs(r,t);this._cancel=new i.CancellationTokenSource;const o=await this.client.execute("jsxClosingTag",n,this._cancel.token);if("response"!==o.type||!o.body)return;if(this._disposed)return;const u=i.window.activeTextEditor;if(!u)return;const d=o.body,h=u.document;e===h&&h.version===l&&u.insertSnippet(this.getTagSnippet(d),this.getInsertionPositions(u,t))},100)}getTagSnippet(e){const t=new i.SnippetString;return t.appendPlaceholder("",0),t.appendText(e.newText),t}getInsertionPositions(e,t){const n=e.selections.map(e=>e.active);return n.some(e=>e.isEqual(t))?n:t}}class l extends o.Disposable{constructor(e,t){super(),this.selector=e,this._registration=this._register(new s.ConditionalRegistration(t)),i.window.onDidChangeActiveTextEditor(this.update,this,this._disposables),this.update()}update(){const e=i.window.activeTextEditor,t=!(!e||!i.languages.match(this.selector,e.document));this._registration.update(t)}}t.ActiveDocumentDependentRegistration=l,t.register=function(e,t,n){return new s.VersionDependentRegistration(n,r.default.v300,()=>new s.ConfigurationDependentRegistration(t,"autoClosingTags",()=>new l(e,()=>new c(n))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(2),s=n(5),o=n(17);class a extends o.default{provideTypeDefinition(e,t,n){return this.getSymbolLocations("typeDefinition",e,t,n)}}t.default=a,t.register=function(e,t){return new s.VersionDependentRegistration(t,r.default.v213,()=>i.languages.registerTypeDefinitionProvider(e,new a(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(0),s=n(2),o=n(59),a=n(7),c=n(8),l=n(14),u=n(1);var d;!function(e){e[e.TypeScript=1]="TypeScript",e[e.JavaScript=2]="JavaScript"}(d||(d={}));class h{constructor(e,t,n){this.document=e,this.filepath=t,this.client=n}open(){const e={file:this.filepath,fileContent:this.document.getText()};if(this.client.apiVersion.gte(s.default.v203)){const t=function(e){switch(e){case c.typescript:return"TS";case c.typescriptreact:return"TSX";case c.javascript:return"JS";case c.javascriptreact:return"JSX"}}(this.document.languageId);t&&(e.scriptKindName=t)}if(this.client.apiVersion.gte(s.default.v230)&&(e.projectRootPath=this.client.getWorkspaceRootForResource(this.document.uri)),this.client.apiVersion.gte(s.default.v240)){const t=this.client.plugins.filter(e=>e.languages.indexOf(this.document.languageId)>=0);t.length&&(e.plugins=t.map(e=>e.name))}this.client.executeWithoutWaitingForResponse("open",e)}get resource(){return this.document.uri}get lineCount(){return this.document.lineCount}get kind(){switch(this.document.languageId){case c.javascript:case c.javascriptreact:return d.JavaScript;case c.typescript:case c.typescriptreact:default:return d.TypeScript}}close(){const e={file:this.filepath};this.client.executeWithoutWaitingForResponse("close",e)}onContentChanged(e){for(const{range:t,text:n}of e){const e=Object.assign({insertString:n},u.Range.toFormattingRequestArgs(this.filepath,t));this.client.executeWithoutWaitingForResponse("change",e)}}}class g extends l.ResourceMap{getForPath(e){return this.get(r.Uri.file(e))}get allBuffers(){return this.values}}class p extends l.ResourceMap{getOrderedFileSet(){const e=Array.from(this.entries).sort((e,t)=>e.value-t.value).map(e=>e.resource),t=new l.ResourceMap;for(const n of e)t.set(n,void 0);return t}}class f{constructor(e,t,n,i){this.files=t,this._token=n,this._done=!1;const r={delay:0,files:Array.from(t.entries).map(t=>e.normalizedPath(t.resource)).filter(e=>!!e)};e.executeAsync("geterr",r,n.token).catch(()=>!0).then(()=>{this._done||(this._done=!0,i())})}static executeGetErrRequest(e,t,n){const i=new r.CancellationTokenSource;return new f(e,t,i,n)}cancel(){this._done||this._token.cancel(),this._token.dispose()}}t.default=class extends a.Disposable{constructor(e,t){super(),this._validateJavaScript=!0,this._validateTypeScript=!0,this.listening=!1,this._onDelete=this._register(new r.EventEmitter),this.onDelete=this._onDelete.event,this.client=e,this.modeIds=new Set(t),this.diagnosticDelayer=new o.Delayer(300);const n=e=>this.client.normalizedPath(e);this.syncedBuffers=new g(n),this.pendingDiagnostics=new p(n),this.updateConfiguration(),r.workspace.onDidChangeConfiguration(this.updateConfiguration,this,this._disposables)}listen(){this.listening||(this.listening=!0,r.workspace.onDidOpenTextDocument(this.openTextDocument,this,this._disposables),r.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument,this,this._disposables),r.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,this._disposables),r.workspace.textDocuments.forEach(this.openTextDocument,this))}handles(e){return this.syncedBuffers.has(e)}toResource(e){const t=this.syncedBuffers.getForPath(e);return t?t.resource:r.Uri.file(e)}reOpenDocuments(){for(const e of this.syncedBuffers.allBuffers)e.open()}openTextDocument(e){if(!this.modeIds.has(e.languageId))return;const t=e.uri,n=this.client.normalizedPath(t);if(!n)return;if(this.syncedBuffers.has(t))return;const i=new h(e,n,this.client);this.syncedBuffers.set(t,i),i.open(),this.requestDiagnostic(i)}closeResource(e){const t=this.syncedBuffers.get(e);t&&(this.pendingDiagnostics.delete(e),this.syncedBuffers.delete(e),t.close(),i.existsSync(e.fsPath)||(this._onDelete.fire(e),this.requestAllDiagnostics()))}interuptGetErr(e){if(!this.pendingGetErr)return e();this.pendingGetErr.cancel(),this.pendingGetErr=void 0;const t=e();return this.triggerDiagnostics(),t}onDidCloseTextDocument(e){this.closeResource(e.uri)}onDidChangeTextDocument(e){const t=this.syncedBuffers.get(e.document.uri);t&&(t.onContentChanged(e.contentChanges),!this.requestDiagnostic(t)&&this.pendingGetErr&&(this.pendingGetErr.cancel(),this.pendingGetErr=void 0,this.triggerDiagnostics()))}requestAllDiagnostics(){for(const e of this.syncedBuffers.allBuffers)this.shouldValidate(e)&&this.pendingDiagnostics.set(e.resource,Date.now());this.triggerDiagnostics()}getErr(e){const t=e.filter(e=>this.handles(e));if(t.length){for(const e of t)this.pendingDiagnostics.set(e,Date.now());this.triggerDiagnostics()}}triggerDiagnostics(e=200){this.diagnosticDelayer.trigger(()=>{this.sendPendingDiagnostics()},e)}requestDiagnostic(e){if(!this.shouldValidate(e))return!1;this.pendingDiagnostics.set(e.resource,Date.now());const t=Math.min(Math.max(Math.ceil(e.lineCount/20),300),800);return this.triggerDiagnostics(t),!0}hasPendingDiagnostics(e){return this.pendingDiagnostics.has(e)}sendPendingDiagnostics(){const e=this.pendingDiagnostics.getOrderedFileSet();for(const t of this.syncedBuffers.values)e.set(t.resource,void 0);if(e.size){if(this.pendingGetErr){this.pendingGetErr.cancel();for(const t of this.pendingGetErr.files.entries)e.set(t.resource,void 0)}const t=this.pendingGetErr=f.executeGetErrRequest(this.client,e,()=>{this.pendingGetErr===t&&(this.pendingGetErr=void 0)})}this.pendingDiagnostics.clear()}updateConfiguration(){const e=r.workspace.getConfiguration("javascript",null),t=r.workspace.getConfiguration("typescript",null);this._validateJavaScript=e.get("validate.enable",!0),this._validateTypeScript=t.get("validate.enable",!0)}shouldValidate(e){switch(e.kind){case d.JavaScript:return this._validateJavaScript;case d.TypeScript:default:return this._validateTypeScript}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.onSuccess=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=null,this.onSuccess=null;var e=this.task&&this.task();return this.task=null,e})),(t>=0||null===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=null,this.onSuccess&&this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(14),s=n(23);class o{constructor(e,t){this.file=e,this.language=t,this._diagnostics=new Map}updateDiagnostics(e,t,n){if(e!==this.language&&(this._diagnostics.clear(),this.language=e),0===n.length){const e=this._diagnostics.get(t);if(!e||e&&0===e.length)return!1}return this._diagnostics.set(t,n),!0}getDiagnostics(e){return e.getValidate(this.language)?[...this.get(0),...this.get(1),...this.getSuggestionDiagnostics(e)]:[]}getSuggestionDiagnostics(e){const t=e.getEnableSuggestions(this.language);return this.get(2).filter(e=>!!t||e.tags&&-1!==e.tags.indexOf(i.DiagnosticTag.Unnecessary))}get(e){return this._diagnostics.get(e)||[]}}class a{constructor(){this._languageSettings=new Map;for(const e of s.allDiagnosticLangauges)this._languageSettings.set(e,a.defaultSettings)}getValidate(e){return this.get(e).validate}setValidate(e,t){return this.update(e,e=>({validate:t,enableSuggestions:e.enableSuggestions}))}getEnableSuggestions(e){return this.get(e).enableSuggestions}setEnableSuggestions(e,t){return this.update(e,e=>({validate:e.validate,enableSuggestions:t}))}get(e){return this._languageSettings.get(e)||a.defaultSettings}update(e,t){const n=this.get(e),i=t(n);return this._languageSettings.set(e,i),n.validate===i.validate&&n.enableSuggestions&&n.enableSuggestions}}a.defaultSettings={validate:!0,enableSuggestions:!0};t.DiagnosticsManager=class{constructor(e){this._diagnostics=new r.ResourceMap,this._settings=new a,this._pendingUpdates=new r.ResourceMap,this._updateDelay=50,this._currentDiagnostics=i.languages.createDiagnosticCollection(e)}dispose(){this._currentDiagnostics.dispose();for(const e of this._pendingUpdates.values)clearTimeout(e);this._pendingUpdates=new r.ResourceMap}reInitialize(){this._currentDiagnostics.clear(),this._diagnostics.clear()}setValidate(e,t){this._settings.setValidate(e,t)&&this.rebuild()}setEnableSuggestions(e,t){this._settings.setEnableSuggestions(e,t)&&this.rebuild()}updateDiagnostics(e,t,n,i){let r=!1;const s=this._diagnostics.get(e);if(s)r=s.updateDiagnostics(t,n,i);else if(i.length){const s=new o(e,t);s.updateDiagnostics(t,n,i),this._diagnostics.set(e,s),r=!0}r&&this.scheduleDiagnosticsUpdate(e)}configFileDiagnosticsReceived(e,t){this._currentDiagnostics.set(e,t)}delete(e){this._currentDiagnostics.delete(e),this._diagnostics.delete(e)}getDiagnostics(e){return this._currentDiagnostics.get(e)||[]}scheduleDiagnosticsUpdate(e){this._pendingUpdates.has(e)||this._pendingUpdates.set(e,setTimeout(()=>this.updateCurrentDiagnostics(e),this._updateDelay))}updateCurrentDiagnostics(e){this._pendingUpdates.has(e)&&(clearTimeout(this._pendingUpdates.get(e)),this._pendingUpdates.delete(e));const t=this._diagnostics.get(e);this._currentDiagnostics.set(e,t?t.getDiagnostics(this._settings):[])}rebuild(){this._currentDiagnostics.clear();for(const e of Array.from(this._diagnostics.values))this._currentDiagnostics.set(e.file,e.getDiagnostics(this._settings))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(4),s=n(0),o=n(24),a=n(2),c=n(25),l=n(7),u=n(62),d=n(64),h=n(65),g=n(66);class p{constructor(e,t,n,i,r,s){this._versionProvider=e,this._logDirectoryProvider=t,this._pluginPathsProvider=n,this._logger=i,this._telemetryReporter=r,this._tracer=s}spawn(e,t,n){const i=e.version||a.default.defaultVersion,{args:r,cancellationPipeName:s,tsServerLogFile:o}=this.getTsServerArgs(t,e,n);p.isLoggingEnabled(i,t)&&(o?this._logger.info(`TSServer log file: ${o}`):this._logger.error("Could not create TSServer log directory")),this._logger.info("Forking TSServer");const c=u.fork(e.tsServerPath,r,this.getForkOptions());return this._logger.info("Started TSServer"),new f(c,o,s,this._logger,this._telemetryReporter,this._tracer)}getForkOptions(){const e=p.getDebugPort();return{execArgv:e?[`--inspect=${e}`]:[]}}getTsServerArgs(e,t,n){const i=[];let s=void 0,o=void 0;const l=t.version||a.default.defaultVersion;if(l.gte(a.default.v206)&&(l.gte(a.default.v250)?i.push("--useInferredProjectPerProjectRoot"):i.push("--useSingleInferredProject"),e.disableAutomaticTypeAcquisition&&i.push("--disableAutomaticTypingAcquisition")),l.gte(a.default.v208)&&i.push("--enableTelemetry"),l.gte(a.default.v222)&&(s=u.getTempFile("tscancellation"),i.push("--cancellationPipeName",s+"*")),p.isLoggingEnabled(l,e)){const t=this._logDirectoryProvider.getNewLogDirectory();t&&(o=r.join(t,"tsserver.log"),i.push("--logVerbosity",c.TsServerLogLevel.toString(e.tsServerLogLevel)),i.push("--logFile",o))}if(l.gte(a.default.v230)){const e=this._pluginPathsProvider.getPluginPaths();n.length&&(i.push("--globalPlugins",n.map(e=>e.name).join(",")),t.path===this._versionProvider.defaultVersion.path&&e.push(...n.map(e=>e.path))),0!==e.length&&i.push("--pluginProbeLocations",e.join(","))}return l.gte(a.default.v234)&&e.npmLocation&&i.push("--npmLocation",`"${e.npmLocation}"`),l.gte(a.default.v260)&&i.push("--locale",p.getTsLocale(e)),l.gte(a.default.v291)&&i.push("--noGetErrOnBackgroundUpdate"),{args:i,cancellationPipeName:s,tsServerLogFile:o}}static getDebugPort(){const e=process.env.TSS_DEBUG;if(e){const t=parseInt(e);if(!isNaN(t))return t}}static isLoggingEnabled(e,t){return e.gte(a.default.v222)&&t.tsServerLogLevel!==c.TsServerLogLevel.Off}static getTsLocale(e){return e.locale?e.locale:s.env.language}}t.TypeScriptServerSpawner=p;class f extends l.Disposable{constructor(e,t,n,i,r,o){super(),this._childProcess=e,this._tsServerLogFile=t,this._cancellationPipeName=n,this._logger=i,this._telemetryReporter=r,this._tracer=o,this._requestQueue=new g.RequestQueue,this._callbacks=new h.CallbackMap,this._pendingResponses=new Set,this._onEvent=this._register(new s.EventEmitter),this.onEvent=this._onEvent.event,this._onExit=this._register(new s.EventEmitter),this.onExit=this._onExit.event,this._onError=this._register(new s.EventEmitter),this.onError=this._onError.event,this._reader=new d.Reader(this._childProcess.stdout),this._reader.onData(e=>this.dispatchMessage(e)),this._childProcess.on("exit",e=>this.handleExit(e)),this._childProcess.on("error",e=>this.handleError(e))}get onReaderError(){return this._reader.onError}get tsServerLogFile(){return this._tsServerLogFile}write(e){this._childProcess.stdin.write(JSON.stringify(e)+"\r\n","utf8")}dispose(){super.dispose(),this._callbacks.destroy("server disposed"),this._pendingResponses.clear()}kill(){this._childProcess.kill()}handleExit(e){this._onExit.fire(e),this._callbacks.destroy("server exited")}handleError(e){this._onError.fire(e),this._callbacks.destroy("server errored")}dispatchMessage(e){try{switch(e.type){case"response":this.dispatchResponse(e);break;case"event":const t=e;if("requestCompleted"===t.event){const e=t.body.request_seq,n=this._callbacks.fetch(e);n&&(this._tracer.traceRequestCompleted("requestCompleted",e,n.startTime),n.onSuccess(void 0))}else this._tracer.traceEvent(t),this._onEvent.fire(t);break;default:throw new Error(`Unknown message type ${e.type} received`)}}finally{this.sendNextRequests()}}tryCancelRequest(e,t){try{if(this._requestQueue.tryCancelPendingRequest(e))return this._tracer.logTrace(`TypeScript Server: canceled request with sequence number ${e}`),!0;if(this._cancellationPipeName){this._tracer.logTrace(`TypeScript Server: trying to cancel ongoing request with sequence number ${e}`);try{i.writeFileSync(this._cancellationPipeName+e,"")}catch(e){}return!0}return this._tracer.logTrace(`TypeScript Server: tried to cancel request with sequence number ${e}. But request got already delivered.`),!1}finally{const n=this.fetchCallback(e);n&&n.onSuccess(new o.CancelledResponse(`Cancelled request ${e} - ${t}`))}}dispatchResponse(e){const t=this.fetchCallback(e.request_seq);t&&(this._tracer.traceResponse(e,t.startTime),e.success?t.onSuccess(e):"No content available."===e.message?t.onSuccess(new o.NoContentResponse):t.onError(e))}executeImpl(e,t,n){const i=this._requestQueue.createRequest(e,t),r={request:i,expectsResponse:n.expectsResult,isAsync:n.isAsync,queueingType:function(e,t){if(m.has(e))return g.RequestQueueingType.Fence;return t?g.RequestQueueingType.LowPriority:g.RequestQueueingType.Normal}(e,n.lowPriority)};let s;if(n.expectsResult){let t=!1;s=new Promise((r,s)=>{this._callbacks.add(i.seq,{onSuccess:r,onError:s,startTime:Date.now(),isAsync:n.isAsync},n.isAsync),n.token&&n.token.onCancellationRequested(()=>{t=!0,this.tryCancelRequest(i.seq,e)})}).catch(n=>{if(!t){this._logger.error(`'${e}' request failed with error.`,n);const t=this.parseErrorText(n&&n.message,e);this._telemetryReporter.logTelemetry("languageServiceErrorResponse",t)}throw n})}else s=Promise.resolve(null);return this._requestQueue.push(r),this.sendNextRequests(),s}parseErrorText(e,t){const n=Object.create(null);if(n.command=t,e){n.errorText=e;const t="Error processing request. ";if(e.startsWith(t)){const i=e.substr(t.length),r=i.indexOf("\n");r>=0&&(n.message=i.substring(0,r),n.stack=i.substring(r+1))}}return n}sendNextRequests(){for(;0===this._pendingResponses.size&&this._requestQueue.length>0;){const e=this._requestQueue.shift();e&&this.sendRequest(e)}}sendRequest(e){const t=e.request;this._tracer.traceRequest(t,e.expectsResponse,this._requestQueue.length),e.expectsResponse&&!e.isAsync&&this._pendingResponses.add(e.request.seq);try{this.write(t)}catch(e){const n=this.fetchCallback(t.seq);n&&n.onError(e)}}fetchCallback(e){const t=this._callbacks.fetch(e);if(t)return this._pendingResponses.delete(e),t}}t.TypeScriptServer=f;const m=new Set(["change","close","open"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(19),r=n(4),s=n(6),o=n(63),a=(()=>{let e;return()=>(e||(e=i.getTempFile("vscode-typescript"),s.existsSync(e)||s.mkdirSync(e)),e)})();t.getTempFile=function(e){return r.join(a(),`${e}-${i.makeRandomHexString(20)}.tmp`)},t.fork=function(e,t,n){const i=function(e,t){const n=Object.assign({},e);return n.ELECTRON_RUN_AS_NODE="1",n.NODE_PATH=r.join(t,"..","..",".."),n.PATH=n.PATH||process.env.PATH,n}(process.env,e);return o.fork(e,t,{silent:!0,cwd:n.cwd,env:i,execArgv:n.execArgv})}},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(7),s=8192,o=Buffer.byteLength("Content-Length: ","utf8"),a=Buffer.from(" ","utf8")[0],c=Buffer.from("\r","utf8")[0],l=Buffer.from("\n","utf8")[0];class u{constructor(){this.index=0,this.buffer=Buffer.allocUnsafe(s)}append(e){let t=null;if(t=Buffer.isBuffer(e)?e:Buffer.from(e,"utf8"),this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{let e=(Math.ceil((this.index+t.length)/s)+1)*s;0===this.index?(this.buffer=Buffer.allocUnsafe(e),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],e)}this.index+=t.length}tryReadContentLength(){let e=-1,t=0;for(;t<this.index&&(this.buffer[t]===a||this.buffer[t]===c||this.buffer[t]===l);)t++;if(this.index<t+o)return e;let n=t+=o;for(;t<this.index&&this.buffer[t]!==c;)t++;if(t+3>=this.index||this.buffer[t+1]!==l||this.buffer[t+2]!==c||this.buffer[t+3]!==l)return e;let i=this.buffer.toString("utf8",n,t);return e=parseInt(i),this.buffer=this.buffer.slice(t+4),this.index=this.index-(t+4),e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString("utf8",0,e),n=e;for(;n<this.index&&(this.buffer[n]===c||this.buffer[n]===l);)n++;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}}t.Reader=class extends r.Disposable{constructor(e){super(),this.buffer=new u,this.nextMessageLength=-1,this._onError=this._register(new i.EventEmitter),this.onError=this._onError.event,this._onData=this._register(new i.EventEmitter),this.onData=this._onData.event,e.on("data",e=>this.onLengthData(e))}onLengthData(e){if(!this.isDisposed)try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength&&(this.nextMessageLength=this.buffer.tryReadContentLength(),-1===this.nextMessageLength))return;const e=this.buffer.tryReadContent(this.nextMessageLength);if(null===e)return;this.nextMessageLength=-1;const t=JSON.parse(e);this._onData.fire(t)}}catch(e){this._onError.fire(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(24);t.CallbackMap=class{constructor(){this._callbacks=new Map,this._asyncCallbacks=new Map}destroy(e){const t=new i.CancelledResponse(e);for(const e of this._callbacks.values())e.onSuccess(t);this._callbacks.clear();for(const e of this._asyncCallbacks.values())e.onSuccess(t);this._asyncCallbacks.clear()}add(e,t,n){n?this._asyncCallbacks.set(e,t):this._callbacks.set(e,t)}fetch(e){const t=this._callbacks.get(e)||this._asyncCallbacks.get(e);return this.delete(e),t}delete(e){this._callbacks.delete(e)||this._asyncCallbacks.delete(e)}}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Normal=1]="Normal",e[e.LowPriority=2]="LowPriority",e[e.Fence=3]="Fence"}(i=t.RequestQueueingType||(t.RequestQueueingType={}));t.RequestQueue=class{constructor(){this.queue=[],this.sequenceNumber=0}get length(){return this.queue.length}push(e){if(e.queueingType===i.Normal){let t=this.queue.length-1;for(;t>=0&&this.queue[t].queueingType===i.LowPriority;)--t;this.queue.splice(t+1,0,e)}else this.queue.push(e)}shift(){return this.queue.shift()}tryCancelPendingRequest(e){for(let t=0;t<this.queue.length;t++)if(this.queue[t].request.seq===e)return this.queue.splice(t,1),!0;return!1}createRequest(e,t){return{seq:this.sequenceNumber++,type:"request",command:e,arguments:t}}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(3),o=n(26),a=n(10),c=s.loadMessageBundle();class l{get output(){return r.window.createOutputChannel(c("channelName","TypeScript"))}data2String(e){return e instanceof Error?o.string(e.stack)?e.stack:e.message:o.boolean(e.success)&&!e.success&&o.string(e.message)?e.message:o.string(e)?e:e.toString()}info(e,t){this.logLevel("Info",e,t)}warn(e,t){this.logLevel("Warn",e,t)}error(e,t){t&&"No content available."===t.message||this.logLevel("Error",e,t)}logLevel(e,t,n){this.output.appendLine(`[${e}  - ${(new Date).toLocaleTimeString()}] ${t}`),n&&this.output.appendLine(this.data2String(n))}}i([a.memoize],l.prototype,"output",null),t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),r=n(0),s=n(27);t.TypeScriptPluginPathsProvider=class{constructor(e){this.configuration=e,this.relativePathResolver=new s.RelativeWorkspacePathResolver}updateConfiguration(e){this.configuration=e}getPluginPaths(){const e=[];for(const t of this.configuration.tsServerPluginPaths)e.push(...this.resolvePluginPath(t));return e}resolvePluginPath(e){if(i.isAbsolute(e))return[e];const t=this.relativePathResolver.asAbsoluteWorkspacePath(e);return void 0!==t?[t]:(r.workspace.workspaceFolders||[]).map(t=>i.join(t.uri.fsPath,e))}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),s=n(70),o=n(10);class a{constructor(e){this.clientVersionDelegate=e,this._reporter=null}dispose(){this._reporter&&(this._reporter.dispose(),this._reporter=null)}logTelemetry(e,t){const n=this.reporter;n&&(t||(t={}),t.version=this.clientVersionDelegate(),n.sendTelemetryEvent(e,t))}get reporter(){return this.packageInfo&&this.packageInfo.aiKey?(this._reporter=new s.default(this.packageInfo.name,this.packageInfo.version,this.packageInfo.aiKey),this._reporter):null}get packageInfo(){const{packageJSON:e}=r.extensions.getExtension("vscode.typescript-language-features");return e?{name:e.name,version:e.version,aiKey:e.aiKey}:null}}i([o.memoize],a.prototype,"reporter",null),i([o.memoize],a.prototype,"packageInfo",null),t.default=a},function(e,t){e.exports=require("vscode-extension-telemetry")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);var r;!function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(r||(r={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}}(r||(r={}));class s{constructor(e){this.logger=e,this.updateConfiguration()}updateConfiguration(){this.trace=s.readTrace()}static readTrace(){let e=r.fromString(i.workspace.getConfiguration().get("typescript.tsserver.trace","off"));return e===r.Off&&process.env.TSS_TRACE&&(e=r.Messages),e}traceRequest(e,t,n){if(this.trace===r.Off)return;let i=void 0;this.trace===r.Verbose&&e.arguments&&(i=`Arguments: ${JSON.stringify(e.arguments,null,4)}`),this.logTrace(`Sending request: ${e.command} (${e.seq}). Response expected: ${t?"yes":"no"}. Current queue length: ${n}`,i)}traceResponse(e,t){if(this.trace===r.Off)return;let n=void 0;this.trace===r.Verbose&&e.body&&(n=`Result: ${JSON.stringify(e.body,null,4)}`),this.logTrace(`Response received: ${e.command} (${e.request_seq}). Request took ${Date.now()-t} ms. Success: ${e.success} ${e.success?"":". Message: "+e.message}`,n)}traceRequestCompleted(e,t,n){this.trace!==r.Off&&this.logTrace(`Async response received: ${e} (${t}). Request took ${Date.now()-n} ms.`)}traceEvent(e){if(this.trace===r.Off)return;let t=void 0;this.trace===r.Verbose&&e.body&&(t=`Data: ${JSON.stringify(e.body,null,4)}`),this.logTrace(`Event received: ${e.event} (${e.seq}).`,t)}logTrace(e,t){this.trace!==r.Off&&this.logger.logLevel("Trace",e,t)}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3).loadMessageBundle(),s="typescript.useWorkspaceTsdk";var o;!function(e){e[e.useLocal=0]="useLocal",e[e.useBundled=1]="useBundled",e[e.learnMore=2]="learnMore"}(o||(o={}));t.TypeScriptVersionPicker=class{constructor(e,t){if(this.versionProvider=e,this.workspaceState=t,this._currentVersion=this.versionProvider.defaultVersion,this.useWorkspaceTsdkSetting){const e=this.versionProvider.localVersion;e&&(this._currentVersion=e)}}get useWorkspaceTsdkSetting(){return this.workspaceState.get(s,!1)}get currentVersion(){return this._currentVersion}useBundledVersion(){this._currentVersion=this.versionProvider.bundledVersion}async show(e){const t=[],n=this.versionProvider.defaultVersion;t.push({label:(this.useWorkspaceTsdkSetting?"":"• ")+r("useVSCodeVersionOption","Use VS Code's Version"),description:n.versionString,detail:n.pathLabel,id:o.useBundled});for(const e of this.versionProvider.localVersions)t.push({label:(this.useWorkspaceTsdkSetting&&this.currentVersion.path===e.path?"• ":"")+r("useWorkspaceVersionOption","Use Workspace Version"),description:e.versionString,detail:e.pathLabel,id:o.useLocal,version:e});t.push({label:r("learnMore","Learn More"),description:"",id:o.learnMore});const a=await i.window.showQuickPick(t,{placeHolder:r("selectTsVersion","Select the TypeScript version used for JavaScript and TypeScript language features"),ignoreFocusOut:e});if(!a)return{oldVersion:this.currentVersion};switch(a.id){case o.useLocal:if(await this.workspaceState.update(s,!0),a.version){const e=i.workspace.getConfiguration("typescript");await e.update("tsdk",a.version.pathLabel,!1);const t=this.currentVersion;return this._currentVersion=a.version,{oldVersion:t,newVersion:a.version}}return{oldVersion:this.currentVersion};case o.useBundled:await this.workspaceState.update(s,!1);const e=this.currentVersion;return this._currentVersion=n,{oldVersion:e,newVersion:n};case o.learnMore:return i.commands.executeCommand("vscode.open",i.Uri.parse("https://go.microsoft.com/fwlink/?linkid=839919")),{oldVersion:this.currentVersion};default:return{oldVersion:this.currentVersion}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(4),s=n(0),o=n(3),a=n(2),c=n(27),l=o.loadMessageBundle();class u{constructor(e,t){this.path=e,this._pathLabel=t}get tsServerPath(){return r.join(this.path,"tsserver.js")}get pathLabel(){return void 0===this._pathLabel?this.path:this._pathLabel}get isValid(){return void 0!==this.version}get version(){const e=this.getTypeScriptVersion(this.tsServerPath);if(e)return e;const t=s.workspace.getConfiguration().get("typescript.tsdk_version",void 0);return t?a.default.fromVersionString(t):void 0}get versionString(){const e=this.version;return e?e.versionString:l("couldNotLoadTsVersion","Could not load the TypeScript version at this path")}getTypeScriptVersion(e){if(!i.existsSync(e))return;const t=e.split(r.sep);if(t.length<=2)return;const n=t.slice(0,-2).join(r.sep);let s=r.join(n,"package.json");if(i.existsSync(s)||"built"===r.basename(n)&&(s=r.join(n,"..","package.json")),!i.existsSync(s))return;const o=i.readFileSync(s).toString();let c=null;try{c=JSON.parse(o)}catch(e){return}return c&&c.version&&c.version?a.default.fromVersionString(c.version):void 0}}t.TypeScriptVersion=u;t.TypeScriptVersionProvider=class{constructor(e){this.configuration=e,this.relativePathResolver=new c.RelativeWorkspacePathResolver}updateConfiguration(e){this.configuration=e}get defaultVersion(){return this.globalVersion||this.bundledVersion}get globalVersion(){if(this.configuration.globalTsdk){const e=this.loadVersionsFromSetting(this.configuration.globalTsdk);if(e&&e.length)return e[0]}}get localVersion(){const e=this.localTsdkVersions;if(e&&e.length)return e[0];const t=this.localNodeModulesVersions;return t&&1===t.length?t[0]:void 0}get localVersions(){const e=this.localTsdkVersions.concat(this.localNodeModulesVersions),t=new Set;return e.filter(e=>!t.has(e.path)&&(t.add(e.path),!0))}get bundledVersion(){try{const{extensionPath:e}=s.extensions.getExtension("vscode.typescript-language-features"),t=r.join(e,"../node_modules/typescript/lib"),n=new u(t,"");if(n.isValid)return n}catch(e){}throw s.window.showErrorMessage(l("noBundledServerFound","VS Code's tsserver was deleted by another application such as a misbehaving virus detection tool. Please reinstall VS Code.")),new Error("Could not find bundled tsserver.js")}get localTsdkVersions(){const e=this.configuration.localTsdk;return e?this.loadVersionsFromSetting(e):[]}loadVersionsFromSetting(e){if(r.isAbsolute(e))return[new u(e)];const t=this.relativePathResolver.asAbsoluteWorkspacePath(e);return void 0!==t?[new u(t,e)]:this.loadTypeScriptVersionsFromPath(e)}get localNodeModulesVersions(){return this.loadTypeScriptVersionsFromPath(r.join("node_modules","typescript","lib")).filter(e=>e.isValid)}loadTypeScriptVersionsFromPath(e){if(!s.workspace.workspaceFolders)return[];const t=[];for(const n of s.workspace.workspaceFolders){let i=e;s.workspace.workspaceFolders&&s.workspace.workspaceFolders.length>1&&(i=r.join(n.name,e)),t.push(new u(r.join(n.uri.fsPath,e),i))}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3).loadMessageBundle(),s=3e4;t.default=class extends i.Disposable{constructor(e){super(()=>this.dispose()),this._acquiringTypings=Object.create({}),this._subscriptions=[],this._client=e,this._subscriptions.push(this._client.onDidBeginInstallTypings(e=>this.onBeginInstallTypings(e.eventId))),this._subscriptions.push(this._client.onDidEndInstallTypings(e=>this.onEndInstallTypings(e.eventId)))}dispose(){this._subscriptions.forEach(e=>e.dispose());for(const e of Object.keys(this._acquiringTypings))clearTimeout(this._acquiringTypings[e])}get isAcquiringTypings(){return Object.keys(this._acquiringTypings).length>0}onBeginInstallTypings(e){this._acquiringTypings[e]||(this._acquiringTypings[e]=setTimeout(()=>{this.onEndInstallTypings(e)},s))}onEndInstallTypings(e){const t=this._acquiringTypings[e];t&&clearTimeout(t),delete this._acquiringTypings[e]}};t.AtaProgressReporter=class{constructor(e){this._promises=new Map,this._disposable=i.Disposable.from(e.onDidBeginInstallTypings(e=>this._onBegin(e.eventId)),e.onDidEndInstallTypings(e=>this._onEndOrTimeout(e.eventId)),e.onTypesInstallerInitializationFailed(e=>this.onTypesInstallerInitializationFailed()))}dispose(){this._disposable.dispose(),this._promises.forEach(e=>e())}_onBegin(e){const t=setTimeout(()=>this._onEndOrTimeout(e),s),n=new Promise(n=>{this._promises.set(e,()=>{clearTimeout(t),n()})});i.window.withProgress({location:i.ProgressLocation.Window,title:r("installingPackages","Fetching data for better TypeScript IntelliSense")},()=>n)}_onEndOrTimeout(e){const t=this._promises.get(e);t&&(this._promises.delete(e),t())}onTypesInstallerInitializationFailed(){i.workspace.getConfiguration("typescript").get("check.npmIsInstalled",!0)&&i.window.showWarningMessage(r("typesInstallerInitializationFailed.title","Could not install typings files for JavaScript language features. Please ensure that NPM is installed or configure 'typescript.npm' in your user settings. Click [here]({0}) to learn more.","https://go.microsoft.com/fwlink/?linkid=847635"),{title:r("typesInstallerInitializationFailed.doNotCheckAgain","Don't Show Again"),id:1}).then(e=>{if(e)switch(e.id){case 1:i.workspace.getConfiguration("typescript").update("check.npmIsInstalled",!1,!0)}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(8);t.default=class{constructor(e){this._normalizePath=e,this._versionBarEntry=i.window.createStatusBarItem(i.StatusBarAlignment.Right,99),this._onChangeEditorSub=i.window.onDidChangeActiveTextEditor(this.showHideStatus,this)}dispose(){this._versionBarEntry.dispose(),this._onChangeEditorSub.dispose()}onDidChangeTypeScriptVersion(e){this.showHideStatus(),this._versionBarEntry.text=e.versionString,this._versionBarEntry.tooltip=e.path,this._versionBarEntry.command="typescript.selectTypeScriptVersion"}showHideStatus(){if(!i.window.activeTextEditor)return void this._versionBarEntry.hide();const e=i.window.activeTextEditor.document;i.languages.match([r.typescript,r.typescriptreact],e)?this._normalizePath(e.uri)?this._versionBarEntry.show():this._versionBarEntry.hide():i.window.activeTextEditor.viewColumn&&this._versionBarEntry.hide()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(4),s=n(0),o=n(3),a=n(2),c=n(13),l=n(8),u=n(20),d=n(1),h=n(5),g=n(9),p=o.loadMessageBundle(),f="updateImportsOnFileMove.enabled";var m;!function(e){e.Prompt="prompt",e.Always="always",e.Never="never"}(m||(m={}));class v{constructor(e,t,n){this.client=e,this.fileConfigurationManager=t,this._handles=n,this._onDidRenameSub=s.workspace.onDidRenameFile(e=>{this.doRename(e.oldUri,e.newUri)})}dispose(){this._onDidRenameSub.dispose()}async doRename(e,t){const n=await this.getTargetResource(t);if(!n)return;const r=this.client.toPath(n);if(!r)return;const o=this.client.toPath(t);if(!o)return;const c=this.client.toPath(e);if(!c)return;const l=await s.workspace.openTextDocument(n);if(this.getConfiguration(l).get(f)===m.Never)return;if(this.client.bufferSyncSupport.closeResource(e),this.client.bufferSyncSupport.openTextDocument(l),this.client.apiVersion.lt(a.default.v300)&&!i.lstatSync(t.fsPath).isDirectory())try{const e=await this.client.execute("navtree",{file:o},g.nulToken);if("response"!==e.type||!e.body)return;const t=e=>!!e.kindModifiers.match(/\bexports?\b/g)||!(!e.childItems||!e.childItems.some(t));if(!t(e.body))return}catch(e){}const u=await this.getEditsForFileRename(r,l,c,o);u&&u.size&&await this.confirmActionWithUser(t,l)&&await s.workspace.applyEdit(u)}async confirmActionWithUser(e,t){switch(this.getConfiguration(t).get(f)){case m.Always:return!0;case m.Never:return!1;case m.Prompt:default:return this.promptUser(e,t)}}getConfiguration(e){return s.workspace.getConfiguration(l.isTypeScriptDocument(e)?"typescript":"javascript",e.uri)}async promptUser(e,t){let n;!function(e){e[e.None=0]="None",e[e.Accept=1]="Accept",e[e.Reject=2]="Reject",e[e.Always=3]="Always",e[e.Never=4]="Never"}(n||(n={}));const i=await s.window.showInformationMessage(p("prompt","Update imports for moved file: '{0}'?",r.basename(e.fsPath)),{modal:!0},{title:p("reject.title","No"),choice:n.Reject,isCloseAffordance:!0},{title:p("accept.title","Yes"),choice:n.Accept},{title:p("always.title","Always automatically update imports"),choice:n.Always},{title:p("never.title","Never automatically update imports"),choice:n.Never});if(!i)return!1;switch(i.choice){case n.Accept:return!0;case n.Reject:return!1;case n.Always:return this.getConfiguration(t).update(f,m.Always,s.ConfigurationTarget.Global),!0;case n.Never:return this.getConfiguration(t).update(f,m.Never,s.ConfigurationTarget.Global),!1}return!1}async getTargetResource(e){if(e.scheme!==c.file)return;const t=i.lstatSync(e.fsPath).isDirectory();if(t&&this.client.apiVersion.gte(a.default.v300))return e;if(t&&this.client.apiVersion.gte(a.default.v292)){return(await s.workspace.findFiles({base:e.fsPath,pattern:"**/*.{ts,tsx,js,jsx}"},"**/node_modules/**",1))[0]}return await this._handles(e)?e:void 0}async getEditsForFileRename(e,t,n,r){const s=i.lstatSync(r).isDirectory();await this.fileConfigurationManager.setGlobalConfigurationFromDocument(t,g.nulToken);const o={file:e,oldFilePath:n,newFilePath:r},c=await this.client.execute("getEditsForFileRename",o,g.nulToken);if("response"!==c.type)return;if(!c.body)return;const l=[];for(const e of c.body){if(this.client.apiVersion.lt(a.default.v300)){if(e.fileName.match(/[\/\\]node_modules[\/\\]/gi))continue;for(const t of e.textChanges)t.newText.match(/\/node_modules\//gi)}l.push(await this.fixEdit(e,s,n,r))}return d.WorkspaceEdit.fromFileCodeEdits(this.client,l)}async fixEdit(e,t,n,i){if(!t||this.client.apiVersion.gte(a.default.v300))return e;const o=await s.workspace.openTextDocument(e.fileName),c=new RegExp("/"+u.escapeRegExp(r.basename(n))+"/"),l=e.textChanges.map(e=>{if(!o.getText(d.Range.fromTextSpan(e)).match(c))return e;const t=new RegExp("/"+u.escapeRegExp(r.basename(i))+"/(.+)$","g").exec(e.newText);return t?{newText:e.newText.slice(0,-t[1].length),start:e.start,end:{line:e.end.line,offset:e.end.offset-t[1].length}}:e});return{fileName:e.fileName,textChanges:l}}}t.register=function(e,t,n){return new h.VersionDependentRegistration(e,a.default.v290,()=>new v(e,t,n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(1);function s(e){switch(e.kind){case"method":return i.SymbolKind.Method;case"enum":return i.SymbolKind.Enum;case"function":return i.SymbolKind.Function;case"class":return i.SymbolKind.Class;case"interface":return i.SymbolKind.Interface;case"var":default:return i.SymbolKind.Variable}}class o{constructor(e,t){this.client=e,this.modeIds=t}async provideWorkspaceSymbols(e,t){const n=this.getUri();if(!n)return[];const a=this.client.toPath(n);if(!a)return[];const c={file:a,searchValue:e},l=await this.client.execute("navto",c,t);if("response"!==l.type||!l.body)return[];const u=[];for(const e of l.body){if(!e.containerName&&"alias"===e.kind)continue;const t=o.getLabel(e);u.push(new i.SymbolInformation(t,s(e),e.containerName||"",r.Location.fromTextSpan(this.client.toResource(e.file),e)))}return u}static getLabel(e){let t=e.name;return"method"!==e.kind&&"function"!==e.kind||(t+="()"),t}getUri(){const e=i.window.activeTextEditor;if(e){const t=e.document;if(t&&this.modeIds.indexOf(t.languageId)>=0)return t.uri}const t=i.workspace.textDocuments;for(const e of t)if(this.modeIds.indexOf(e.languageId)>=0)return e.uri}}t.register=function(e,t){return i.languages.registerWorkspaceSymbolProvider(new o(e,t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.CommandManager=class{constructor(){this.commands=new Map}dispose(){for(const e of this.commands.values())e.dispose();this.commands.clear()}register(e){for(const t of Array.isArray(e.id)?e.id:[e.id])this.registerCommand(t,e.execute,e);return e}registerCommand(e,t,n){this.commands.has(e)||this.commands.set(e,i.commands.registerCommand(e,t,n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this._getValue=e,this._hasValue=!1}get value(){return this._hasValue||(this._hasValue=!0,this._value=this._getValue()),this._value}get hasValue(){return this._hasValue}map(e){return new i(()=>e(this.value))}}t.lazy=function(e){return new i(e)}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});const r=n(6),s=n(4),o=n(10);class a{constructor(e){this.context=e}getNewLogDirectory(){const e=this.logDirectory();if(e)try{return r.mkdtempSync(s.join(e,"tsserver-log-"))}catch(e){return}}logDirectory(){try{const e=this.context.logPath;return r.existsSync(e)||r.mkdirSync(e),this.context.logPath}catch(e){return}}}i([o.memoize],a.prototype,"logDirectory",null),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(8);class s{constructor(e){this.normalizePath=e,this.isInManagedFileContext=!1,this.onDidChangeActiveTextEditorSub=i.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this),this.onDidChangeActiveTextEditor(i.window.activeTextEditor)}dispose(){this.onDidChangeActiveTextEditorSub.dispose()}onDidChangeActiveTextEditor(e){if(e){const t=r.isSupportedLanguageMode(e.document)&&null!==this.normalizePath(e.document.uri);this.updateContext(t)}}updateContext(e){e!==this.isInManagedFileContext&&(i.commands.executeCommand("setContext",s.contextName,e),this.isInManagedFileContext=e)}}s.contextName="typescript.isManagedFile",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.getContributedTypeScriptServerPlugins=function(){const e=[];for(const t of i.extensions.all){const n=t.packageJSON;if(n.contributes&&n.contributes.typescriptServerPlugins&&Array.isArray(n.contributes.typescriptServerPlugins))for(const i of n.contributes.typescriptServerPlugins)e.push({name:i.name,path:t.extensionPath,languages:Array.isArray(i.languages)?i.languages:[]})}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3),s=n(12),o=r.loadMessageBundle();class a{constructor(e){this.telemetryReporter=e,this._item=i.window.createStatusBarItem(i.StatusBarAlignment.Right,98),this._item.command="js.projectStatus.command"}getCurrentHint(){return this._currentHint}hide(){this._item.hide()}show(e){this._currentHint={message:e?o("hintExclude","To enable project-wide JavaScript/TypeScript language features, exclude folders with many files, like: {0}",e):o("hintExclude.generic","To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on.")},this._item.tooltip=this._currentHint.message,this._item.text=o("large.label","Configure Excludes"),this._item.tooltip=o("hintExclude.tooltip","To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on."),this._item.color="#A5DF3B",this._item.show(),this.telemetryReporter.logTelemetry("js.hintProjectExcludes")}}function c(e,t){if(s.isImplicitProjectConfigFile(t)){const n=e.getWorkspaceRootForResource(i.Uri.file(t));n&&s.openOrCreateConfigFile(null!==t.match(/tsconfig\.?.*\.json/),n,e.configuration)}else i.workspace.openTextDocument(t).then(i.window.showTextDocument)}t.create=function(e,t){const n=[],r=new a(t);return n.push(i.commands.registerCommand("js.projectStatus.command",()=>{r.configFileName&&c(e,r.configFileName);let{message:t}=r.getCurrentHint();return i.window.showInformationMessage(t)})),n.push(function(e,t){return t.onProjectLanguageServiceStateChanged(n=>{if(n.languageServiceEnabled)e.hide();else{e.show();const r=n.projectName;r&&(e.configFileName=r,i.window.showWarningMessage(e.getCurrentHint().message,{title:o("large.label","Configure Excludes"),index:0}).then(e=>{e&&0===e.index&&c(t,r)}))}})}(r,e)),i.Disposable.from(...n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(3).loadMessageBundle(),s=[{id:"checkJs",prompt:r("survey.checkJs.prompt","Help improve VS Code's support for [checkJs](https://code.visualstudio.com/Docs/languages/javascript#_type-checking) in JavaScript! Since you have been using this feature, would you consider taking a short survey about your experience?"),globalTriggerThreshold:10,url:i.Uri.parse("https://www.surveymonkey.com/r/FH8PZQ3"),remindLaterDelayInMilliseconds:2592e5}];class o{constructor(e,t){this.data=e,this.memento=t,this._hasShownInThisSession=!1}get id(){return this.data.id}get prompt(){return this.data.prompt}get isActive(){return!this._hasShownInThisSession&&!this.memento.get(this.isCompletedMementoKey)}open(){this.markComplete(),i.commands.executeCommand("vscode.open",this.data.url)}remindLater(){this._hasShownInThisSession=!0,this.memento.update(this.lastPromptTimeMementoKey,Date.now())}trigger(){const e=this.triggerCount+1;if(this.memento.update(this.triggerCountMementoKey,e),e>=this.data.globalTriggerThreshold){const e=this.memento.get(this.lastPromptTimeMementoKey);return!(e&&!isNaN(+e))||e+this.data.remindLaterDelayInMilliseconds<Date.now()}return!1}willShow(){this._hasShownInThisSession=!0}markComplete(){this._hasShownInThisSession=!0,this.memento.update(this.isCompletedMementoKey,!0)}get triggerCount(){const e=this.memento.get(this.triggerCountMementoKey);return!e||isNaN(+e)?0:+e}getMementoKey(e){return`survey.v0.${this.id}.${e}`}get isCompletedMementoKey(){return this.getMementoKey("isComplete")}get lastPromptTimeMementoKey(){return this.getMementoKey("lastPromptTime")}get triggerCountMementoKey(){return this.getMementoKey("globalTriggerCount")}}t.Surveyor=class{constructor(e){this.surveys=new Map(s.map(t=>[t.id,new o(t,e)]))}surveyReady(e){const t=this.tryGetActiveSurvey(e);t&&t.trigger()&&(t.willShow(),this.showSurveyToUser(t))}async showSurveyToUser(e){let t;!function(e){e[e.GoToSurvey=1]="GoToSurvey",e[e.RemindLater=2]="RemindLater",e[e.NeverAgain=3]="NeverAgain"}(t||(t={}));const n=await i.window.showInformationMessage(e.prompt,{title:r("takeShortSurvey","Take Short Survey"),choice:t.GoToSurvey},{title:r("remindLater","Remind Me Later"),choice:t.RemindLater},{title:r("neverAgain","Disable JS/TS Surveys"),choice:t.NeverAgain});switch(n&&n.choice){case t.GoToSurvey:e.open();break;case t.NeverAgain:e.markComplete(),this.disableSurveys();break;case t.RemindLater:default:e.remindLater()}}tryGetActiveSurvey(e){const t=this.surveys.get(e);if(t)return this.areSurveysEnabled()&&t.isActive?t:void 0}areSurveysEnabled(){return i.workspace.getConfiguration("typescript").get("surveys.enabled",!0)}disableSurveys(){i.workspace.getConfiguration("typescript").update("surveys.enabled",!1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(86),r=n(4),s=n(0),o=n(18);function a(e,t){return e&&"array"===e.type&&e.children?e.children.map(t):[]}class c{provideDocumentLinks(e,t){const n=i.parseTree(e.getText());return n?[this.getExendsLink(e,n),...this.getFilesLinks(e,n),...this.getReferencesLinks(e,n)].filter(e=>!!e):null}getExendsLink(e,t){const n=i.findNodeAtLocation(t,["extends"]);if(this.isPathValue(n))return new s.DocumentLink(this.getRange(e,n),r.basename(n.value).match(".json$")?this.getFileTarget(e,n):s.Uri.file(r.join(r.dirname(e.uri.fsPath),n.value+".json")))}getFilesLinks(e,t){return a(i.findNodeAtLocation(t,["files"]),t=>this.pathNodeToLink(e,t))}getReferencesLinks(e,t){return a(i.findNodeAtLocation(t,["references"]),t=>{const n=i.findNodeAtLocation(t,["path"]);if(this.isPathValue(n))return new s.DocumentLink(this.getRange(e,n),r.basename(n.value).match(".json$")?this.getFileTarget(e,n):this.getFolderTarget(e,n))})}pathNodeToLink(e,t){return this.isPathValue(t)?new s.DocumentLink(this.getRange(e,t),this.getFileTarget(e,t)):void 0}isPathValue(e){return e&&"string"===e.type&&e.value&&!e.value.includes("*")}getFileTarget(e,t){return s.Uri.file(r.join(r.dirname(e.uri.fsPath),t.value))}getFolderTarget(e,t){return s.Uri.file(r.join(r.dirname(e.uri.fsPath),t.value,"tsconfig.json"))}getRange(e,t){const n=t.offset,i=e.positionAt(n+1),r=e.positionAt(n+(t.length-1));return new s.Range(i,r)}}t.register=function(){const e=["**/[jt]sconfig.json","**/[jt]sconfig.*.json"],t=o.flatten(["json","jsonc"].map(t=>e.map(e=>({language:t,pattern:e}))));return s.languages.registerDocumentLinkProvider(t,new c)}},function(e,t,n){"use strict";function i(e,t){void 0===t&&(t=!1);var n=0,i=e.length,a="",c=0,l=16,u=0;function d(t,i){for(var r=0,s=0;r<t||!i;){var o=e.charCodeAt(n);if(o>=48&&o<=57)s=16*s+o-48;else if(o>=65&&o<=70)s=16*s+o-65+10;else{if(!(o>=97&&o<=102))break;s=16*s+o-97+10}n++,r++}return r<t&&(s=-1),s}function h(){if(a="",u=0,c=n,n>=i)return c=i,l=17;var t=e.charCodeAt(n);if(r(t)){do{n++,a+=String.fromCharCode(t),t=e.charCodeAt(n)}while(r(t));return l=15}if(s(t))return n++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,a+="\n"),l=14;switch(t){case 123:return n++,l=1;case 125:return n++,l=2;case 91:return n++,l=3;case 93:return n++,l=4;case 58:return n++,l=6;case 44:return n++,l=5;case 34:return n++,a=function(){for(var t="",r=n;;){if(n>=i){t+=e.substring(r,n),u=2;break}var o=e.charCodeAt(n);if(34===o){t+=e.substring(r,n),n++;break}if(92!==o){if(o>=0&&o<=31){if(s(o)){t+=e.substring(r,n),u=2;break}u=6}n++}else{if(t+=e.substring(r,n),++n>=i){u=2;break}switch(o=e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=d(4,!0);a>=0?t+=String.fromCharCode(a):u=4;break;default:u=5}r=n}}return t}(),l=10;case 47:var h=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<i&&!s(e.charCodeAt(n));)n++;return a=e.substring(h,n),l=12}if(42===e.charCodeAt(n+1)){n+=2;for(var p=!1;n<i;){if(42===e.charCodeAt(n)&&n+1<i&&47===e.charCodeAt(n+1)){n+=2,p=!0;break}n++}return p||(n++,u=1),a=e.substring(h,n),l=13}return a+=String.fromCharCode(t),n++,l=16;case 45:if(a+=String.fromCharCode(t),++n===i||!o(e.charCodeAt(n)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&o(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&o(e.charCodeAt(n))))return u=3,e.substring(t,n);for(n++;n<e.length&&o(e.charCodeAt(n));)n++}var i=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&o(e.charCodeAt(n))){for(n++;n<e.length&&o(e.charCodeAt(n));)n++;i=n}else u=3;return e.substring(t,i)}(),l=11;default:for(;n<i&&g(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(a=e.substring(c,n)){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return a+=String.fromCharCode(t),n++,l=16}}function g(e){if(r(e)||s(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,a="",c=0,l=16,u=0},getPosition:function(){return n},scan:t?function(){var e;do{e=h()}while(e>=12&&e<=15);return e}:h,getToken:function(){return l},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenError:function(){return u}}}function r(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function s(e){return 10===e||13===e||8232===e||8233===e}function o(e){return e>=48&&e<=57}function a(e,t,n){var r,s,o,a,u;if(t){for(a=t.offset,u=a+t.length,o=a;o>0&&!l(e,o-1);)o--;for(var d=u;d<e.length&&!l(e,d);)d++;s=e.substring(o,d),r=function(e,t){var n=0,i=0,r=t.tabSize||4;for(;n<e.length;){var s=e.charAt(n);if(" "===s)i++;else{if("\t"!==s)break;i+=r}n++}return Math.floor(i/r)}(s,n)}else s=e,r=0,o=0,a=0,u=e.length;var h,g=function(e,t){for(var n=0;n<t.length;n++){var i=t.charAt(n);if("\r"===i)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===i)return"\n"}return e&&e.eol||"\n"}(n,e),p=!1,f=0;h=n.insertSpaces?c(" ",n.tabSize||4):"\t";var m=i(s,!1),v=!1;function y(){return g+c(h,r+f)}function w(){var e=m.scan();for(p=!1;15===e||14===e;)p=p||14===e,e=m.scan();return v=16===e||0!==m.getTokenError(),e}var S=[];function b(t,n,i){!v&&n<u&&i>a&&e.substring(n,i)!==t&&S.push({offset:n,length:i-n,content:t})}var C=w();if(17!==C){var _=m.getTokenOffset()+o;b(c(h,r),o,_)}for(;17!==C;){for(var T=m.getTokenOffset()+m.getTokenLength()+o,k=w(),x="";!p&&(12===k||13===k);){b(" ",T,m.getTokenOffset()+o),T=m.getTokenOffset()+m.getTokenLength()+o,x=12===k?y():"",k=w()}if(2===k)1!==C&&(f--,x=y());else if(4===k)3!==C&&(f--,x=y());else{switch(C){case 3:case 1:f++,x=y();break;case 5:case 12:x=y();break;case 13:x=p?y():" ";break;case 6:x=" ";break;case 10:if(6===k){x="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===k||13===k?x=" ":5!==k&&17!==k&&(v=!0);break;case 16:v=!0}!p||12!==k&&13!==k||(x=y())}b(x,T,m.getTokenOffset()+o),C=k}return S}function c(e,t){for(var n="",i=0;i<t;i++)n+=e;return n}function l(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}function u(e,t,n){void 0===t&&(t=[]);var i={type:"array",offset:-1,length:-1,children:[],parent:void 0};function r(e){"property"===i.type&&(i.length=e-i.offset,i=i.parent)}function s(e){return i.children.push(e),e}h(e,{onObjectBegin:function(e){i=s({type:"object",offset:e,length:-1,parent:i,children:[]})},onObjectProperty:function(e,t,n){(i=s({type:"property",offset:t,length:-1,parent:i,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:i})},onObjectEnd:function(e,t){i.length=e+t-i.offset,i=i.parent,r(e+t)},onArrayBegin:function(e,t){i=s({type:"array",offset:e,length:-1,parent:i,children:[]})},onArrayEnd:function(e,t){i.length=e+t-i.offset,i=i.parent,r(e+t)},onLiteralValue:function(e,t,n){s({type:g(e),offset:t,length:n,parent:i,value:e}),r(t+n)},onSeparator:function(e,t,n){"property"===i.type&&(":"===e?i.colonOffset=t:","===e&&r(t))},onError:function(e,n,i){t.push({error:e,offset:n,length:i})}},n);var o=i.children[0];return o&&delete o.parent,o}function d(e,t){if(e){for(var n=e,i=0,r=t;i<r.length;i++){var s=r[i];if("string"==typeof s){if("object"!==n.type||!Array.isArray(n.children))return;for(var o=!1,a=0,c=n.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===s){n=l.children[1],o=!0;break}}if(!o)return}else{var u=s;if("array"!==n.type||u<0||!Array.isArray(n.children)||u>=n.children.length)return;n=n.children[u]}}return n}}function h(e,t,n){var r=i(e,!1);function s(e){return e?function(){return e(r.getTokenOffset(),r.getTokenLength())}:function(){return!0}}function o(e){return e?function(t){return e(t,r.getTokenOffset(),r.getTokenLength())}:function(){return!0}}var a=s(t.onObjectBegin),c=o(t.onObjectProperty),l=s(t.onObjectEnd),u=s(t.onArrayBegin),d=s(t.onArrayEnd),h=o(t.onLiteralValue),g=o(t.onSeparator),p=s(t.onComment),f=o(t.onError),m=n&&n.disallowComments,v=n&&n.allowTrailingComma;function y(){for(;;){var e=r.scan();switch(r.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:m||w(11);break;case 2:w(12);break;case 6:w(16)}switch(e){case 12:case 13:m?w(10):p();break;case 16:w(1);break;case 15:case 14:break;default:return e}}}function w(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),f(e),t.length+n.length>0)for(var i=r.getToken();17!==i;){if(-1!==t.indexOf(i)){y();break}if(-1!==n.indexOf(i))break;i=y()}}function S(e){var t=r.getTokenValue();return e?h(t):c(t),y(),!0}function b(){switch(r.getToken()){case 3:return function(){u(),y();for(var e=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(e||w(4,[],[]),g(","),y(),4===r.getToken()&&v)break}else e&&w(6,[],[]);b()||w(4,[],[4,5]),e=!0}return d(),4!==r.getToken()?w(8,[4],[]):y(),!0}();case 1:return function(){a(),y();for(var e=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(e||w(4,[],[]),g(","),y(),2===r.getToken()&&v)break}else e&&w(6,[],[]);(10!==r.getToken()?(w(3,[],[2,5]),0):(S(!1),6===r.getToken()?(g(":"),y(),b()||w(4,[],[2,5])):w(5,[],[2,5]),1))||w(4,[],[2,5]),e=!0}return l(),2!==r.getToken()?w(7,[2],[]):y(),!0}();case 10:return S(!0);default:return function(){switch(r.getToken()){case 11:var e=0;try{"number"!=typeof(e=JSON.parse(r.getTokenValue()))&&(w(2),e=0)}catch(e){w(2)}h(e);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return y(),!0}()}}return y(),17===r.getToken()||(b()?(17!==r.getToken()&&w(9,[],[]),!0):(w(4,[],[]),!1))}function g(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}function p(e,t,n,i,r){for(var s,o=u(e,[]),a=void 0,c=void 0;t.length>0&&(c=t.pop(),void 0===(a=d(o,t))&&void 0!==n);)"string"==typeof c?((s={})[c]=n,n=s):n=[n];if(a){if("object"===a.type&&"string"==typeof c&&Array.isArray(a.children)){var l=d(a,[c]);if(void 0!==l){if(void 0===n){if(!l.parent)throw new Error("Malformed AST");var h=a.children.indexOf(l.parent),g=void 0,p=l.parent.offset+l.parent.length;if(h>0)g=(b=a.children[h-1]).offset+b.length;else if(g=a.offset+1,a.children.length>1)p=a.children[1].offset;return f(e,{offset:g,length:p-g,content:""},i)}return f(e,{offset:l.offset,length:l.length,content:JSON.stringify(n)},i)}if(void 0===n)return[];var m=JSON.stringify(c)+": "+JSON.stringify(n),v=r?r(a.children.map(function(e){return e.children[0].value})):a.children.length,y=void 0;return f(e,y=v>0?{offset:(b=a.children[v-1]).offset+b.length,length:0,content:","+m}:0===a.children.length?{offset:a.offset+1,length:0,content:m}:{offset:a.offset+1,length:0,content:m+","},i)}if("array"===a.type&&"number"==typeof c&&Array.isArray(a.children)){if(-1===c){m=""+JSON.stringify(n),y=void 0;if(0===a.children.length)y={offset:a.offset+1,length:0,content:m};else y={offset:(b=a.children[a.children.length-1]).offset+b.length,length:0,content:","+m};return f(e,y,i)}if(void 0===n&&a.children.length>=0){var w=c,S=a.children[w];y=void 0;if(1===a.children.length)y={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===w){var b,C=(b=a.children[w-1]).offset+b.length;y={offset:C,length:a.offset+a.length-2-C,content:""}}else y={offset:S.offset,length:a.children[w+1].offset-S.offset,content:""};return f(e,y,i)}throw new Error("Array modification not supported yet")}throw new Error("Can not add "+("number"!=typeof c?"index":"property")+" to parent of type "+a.type)}if(void 0===n)throw new Error("Can not delete in empty document");return f(e,{offset:o?o.offset:0,length:o?o.length:0,content:JSON.stringify(n)},i)}function f(e,t,n){var i=m(e,t),r=t.offset,s=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;r>0&&!l(i,r-1);)r--;for(;s<i.length&&!l(i,s);)s++}for(var o=a(i,{offset:r,length:s-r},n),c=o.length-1;c>=0;c--){var u=o[c];i=m(i,u),r=Math.min(r,u.offset),s=Math.max(s,u.offset+u.length),s+=u.content.length-u.length}return[{offset:r,length:e.length-(i.length-s)-r,content:i.substring(r,s)}]}function m(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}n.r(t),n.d(t,"createScanner",function(){return v}),n.d(t,"getLocation",function(){return y}),n.d(t,"parse",function(){return w}),n.d(t,"parseTree",function(){return S}),n.d(t,"findNodeAtLocation",function(){return b}),n.d(t,"findNodeAtOffset",function(){return C}),n.d(t,"getNodePath",function(){return _}),n.d(t,"getNodeValue",function(){return T}),n.d(t,"visit",function(){return k}),n.d(t,"stripComments",function(){return x}),n.d(t,"format",function(){return P}),n.d(t,"modify",function(){return R}),n.d(t,"applyEdits",function(){return D});var v=i,y=function(e,t){var n=[],i=new Object,r=void 0,s={value:{},offset:0,length:0,type:"object",parent:void 0},o=!1;function a(e,t,n,i){s.value=e,s.offset=t,s.length=n,s.type=i,s.colonOffset=void 0,r=s}try{h(e,{onObjectBegin:function(e,s){if(t<=e)throw i;r=void 0,o=t>e,n.push("")},onObjectProperty:function(e,r,s){if(t<r)throw i;if(a(e,r,s,"property"),n[n.length-1]=e,t<=r+s)throw i},onObjectEnd:function(e,s){if(t<=e)throw i;r=void 0,n.pop()},onArrayBegin:function(e,s){if(t<=e)throw i;r=void 0,n.push(0)},onArrayEnd:function(e,s){if(t<=e)throw i;r=void 0,n.pop()},onLiteralValue:function(e,n,r){if(t<n)throw i;if(a(e,n,r,g(e)),t<=n+r)throw i},onSeparator:function(e,s,a){if(t<=s)throw i;if(":"===e&&r&&"property"===r.type)r.colonOffset=s,o=!1,r=void 0;else if(","===e){var c=n[n.length-1];"number"==typeof c?n[n.length-1]=c+1:(o=!0,n[n.length-1]=""),r=void 0}}})}catch(e){if(e!==i)throw e}return{path:n,previousNode:r,isAtPropertyKey:o,matches:function(e){for(var t=0,i=0;t<e.length&&i<n.length;i++)if(e[t]===n[i]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},w=function(e,t,n){void 0===t&&(t=[]);var i=null,r=[],s=[];function o(e){Array.isArray(r)?r.push(e):i&&(r[i]=e)}return h(e,{onObjectBegin:function(){var e={};o(e),s.push(r),r=e,i=null},onObjectProperty:function(e){i=e},onObjectEnd:function(){r=s.pop()},onArrayBegin:function(){var e=[];o(e),s.push(r),r=e,i=null},onArrayEnd:function(){r=s.pop()},onLiteralValue:o,onError:function(e,n,i){t.push({error:e,offset:n,length:i})}},n),r[0]},S=u,b=d,C=function e(t,n,i){if(void 0===i&&(i=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,i)){var r=t.children;if(Array.isArray(r))for(var s=0;s<r.length&&r[s].offset<=n;s++){var o=e(r[s],n,i);if(o)return o}return t}},_=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var i=t.parent.children[0].value;n.push(i)}else if("array"===t.parent.type){var r=t.parent.children.indexOf(t);-1!==r&&n.push(r)}return n},T=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),i=0,r=t.children;i<r.length;i++){var s=r[i],o=s.children[1];o&&(n[s.children[0].value]=e(o))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}},k=h,x=function(e,t){var n,r,s=i(e),o=[],a=0;do{switch(r=s.getPosition(),n=s.scan()){case 12:case 13:case 17:a!==r&&o.push(e.substring(a,r)),void 0!==t&&o.push(s.getTokenValue().replace(/[^\r\n]/g,t)),a=s.getPosition()}}while(17!==n);return o.join("")};function P(e,t,n){return a(e,t,n)}function R(e,t,n,i){return p(e,t,n,i.formattingOptions,i.getInsertionIndex)}function D(e,t){for(var n=t.length-1;n>=0;n--)e=m(e,t[n]);return e}}]));
//# sourceMappingURL=//extensions/typescript-language-features/dist/extension.js.map